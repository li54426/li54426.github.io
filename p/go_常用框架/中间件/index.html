<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content=" content {:toc} å®ç°å‡½æ•°å¯¹è±¡ åœ¨ Go ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…æ¥å®ç°ç±»ä¼¼äº C++ å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰çš„åŠŸèƒ½ã€‚å‡½æ•°ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’å’Œè¿”å›å€¼ï¼Œè€Œé—­åŒ…å¯ä»¥æ•è·å¤–éƒ¨å˜é‡å¹¶å½¢æˆä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚\n">
<title>Go_å¸¸ç”¨æ¡†æ¶/ä¸­é—´ä»¶</title>

<link rel='canonical' href='https://li54426.github.io/p/go_%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Go_å¸¸ç”¨æ¡†æ¶/ä¸­é—´ä»¶">
<meta property='og:description' content=" content {:toc} å®ç°å‡½æ•°å¯¹è±¡ åœ¨ Go ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…æ¥å®ç°ç±»ä¼¼äº C++ å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰çš„åŠŸèƒ½ã€‚å‡½æ•°ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’å’Œè¿”å›å€¼ï¼Œè€Œé—­åŒ…å¯ä»¥æ•è·å¤–éƒ¨å˜é‡å¹¶å½¢æˆä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚\n">
<meta property='og:url' content='https://li54426.github.io/p/go_%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6/'>
<meta property='og:site_name' content='æ¼”ç¤ºç«™ç‚¹'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='byte_tech' /><meta property='article:tag' content='go' /><meta property='article:published_time' content='2023-08-17T09:43:00&#43;00:00'/><meta property='article:modified_time' content='2023-08-17T09:43:00&#43;00:00'/>
<meta name="twitter:title" content="Go_å¸¸ç”¨æ¡†æ¶/ä¸­é—´ä»¶">
<meta name="twitter:description" content=" content {:toc} å®ç°å‡½æ•°å¯¹è±¡ åœ¨ Go ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…æ¥å®ç°ç±»ä¼¼äº C++ å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰çš„åŠŸèƒ½ã€‚å‡½æ•°ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’å’Œè¿”å›å€¼ï¼Œè€Œé—­åŒ…å¯ä»¥æ•è·å¤–éƒ¨å˜é‡å¹¶å½¢æˆä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu15906844328442591646.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">æ¼”ç¤ºç«™ç‚¹</a></h1>
            <h2 class="site-description">æˆ‘çš„ä¸ªäººåšå®¢ã€‚</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://li54426.github.io/en/" >English</option>
                                
                                    <option value="https://li54426.github.io/" selected>ä¸­æ–‡</option>
                                
                                    <option value="https://li54426.github.io/ar/" >Ø¹Ø±Ø¨ÙŠ</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li>
          <ol>
            <li><a href="#å®ç°å‡½æ•°å¯¹è±¡">å®ç°å‡½æ•°å¯¹è±¡</a></li>
          </ol>
        </li>
        <li><a href="#test">test</a>
          <ol>
            <li><a href="#go-testå‚æ•°">go testå‚æ•°</a></li>
          </ol>
        </li>
        <li><a href="#log">log</a></li>
        <li><a href="#os">OS</a></li>
        <li><a href="#io">IO</a>
          <ol>
            <li><a href="#1reader">1ã€Reader</a></li>
            <li><a href="#2writer">2ã€Writer</a></li>
            <li><a href="#3closer">3ã€Closer</a></li>
            <li><a href="#4seeker">4ã€Seeker</a></li>
          </ol>
        </li>
        <li><a href="#bufio">bufio</a></li>
        <li><a href="#string">string</a></li>
        <li><a href="#gorm">GORM</a>
          <ol>
            <li><a href="#demo">demo</a></li>
            <li><a href="#å®šä¹‰æ•°æ®ç±»å‹">å®šä¹‰æ•°æ®ç±»å‹</a></li>
            <li><a href="#è¿æ¥-å…³é—­æ•°æ®åº“">è¿æ¥/ å…³é—­æ•°æ®åº“</a></li>
            <li><a href="#åˆ›å»º">åˆ›å»º</a></li>
            <li><a href="#ç®€å•æŸ¥è¯¢">ç®€å•æŸ¥è¯¢</a></li>
            <li><a href="#select-è¯­å¥">select è¯­å¥</a></li>
            <li><a href="#è¿”å›å¤šæ¡è®°å½•">è¿”å›å¤šæ¡è®°å½•</a></li>
            <li><a href="#æ›´æ–°">æ›´æ–°</a></li>
            <li><a href="#ä¸å­˜åœ¨åˆ™åˆ›å»º">ä¸å­˜åœ¨åˆ™åˆ›å»º</a></li>
          </ol>
        </li>
        <li><a href="#net-http">net/ http</a>
          <ol>
            <li><a href="#å®¢æˆ·ç«¯æ–¹æ³•">å®¢æˆ·ç«¯æ–¹æ³•</a></li>
            <li><a href="#å®¢æˆ·ç«¯å‚æ•°--neturl">å®¢æˆ·ç«¯å‚æ•°  net/url</a></li>
            <li><a href="#postæ–¹æ³•">postæ–¹æ³•</a></li>
            <li><a href="#æœåŠ¡å™¨ç«¯">æœåŠ¡å™¨ç«¯</a></li>
          </ol>
        </li>
        <li><a href="#gin">gin</a>
          <ol>
            <li><a href="#gincontext">gin.context</a></li>
            <li><a href="#å¿«é€Ÿä½¿ç”¨">å¿«é€Ÿä½¿ç”¨</a></li>
            <li><a href="#json">json</a></li>
            <li><a href="#è·å–å‚æ•°">è·å–å‚æ•°</a></li>
            <li><a href="#è·¯ç”±">è·¯ç”±</a></li>
            <li><a href="#ä¸­é—´ä»¶">ä¸­é—´ä»¶</a></li>
            <li><a href="#æ—¥å¿—">æ—¥å¿—</a></li>
            <li><a href="#å›å¤">å›å¤</a></li>
            <li><a href="#gin-é¡¹ç›®ç›®å½•ç»“æ„">gin é¡¹ç›®ç›®å½•ç»“æ„</a></li>
          </ol>
        </li>
        <li><a href="#yaml">YAML</a>
          <ol>
            <li><a href="#è¯­æ³•ç‰¹ç‚¹">è¯­æ³•ç‰¹ç‚¹</a></li>
            <li><a href="#å±æ€§">å±æ€§</a></li>
            <li><a href="#ä½¿ç”¨è¯´æ˜">ä½¿ç”¨è¯´æ˜</a></li>
          </ol>
        </li>
        <li><a href="#jwt">jwt</a>
          <ol>
            <li><a href="#æ‘˜è¦">æ‘˜è¦</a></li>
            <li><a href="#ç»“æ„">ç»“æ„</a></li>
            <li><a href="#ç­¾åç®—æ³•">ç­¾åç®—æ³•</a></li>
            <li><a href="#jwt-äº§ç”Ÿçš„-token-è¿˜éœ€è¦åŠ å¯†ä¹ˆ">jwt äº§ç”Ÿçš„ token è¿˜éœ€è¦åŠ å¯†ä¹ˆ</a></li>
            <li><a href="#ä½¿ç”¨è¯´æ˜-1">ä½¿ç”¨è¯´æ˜</a></li>
          </ol>
        </li>
        <li><a href="#structmapper-githubcomhttpsgithubcomwizardshanstructmapper"><a href="https://github.com/wizardshan/structmapper">structmapper (github.com)</a></a></li>
        <li><a href="#hertz">hertz</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/go_%E5%B8%B8%E7%94%A8%E6%A1%86%E6%9E%B6/%E4%B8%AD%E9%97%B4%E4%BB%B6/">Go_å¸¸ç”¨æ¡†æ¶/ä¸­é—´ä»¶</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2023-08-17</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 24 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <ul>
<li>content
{:toc}</li>
</ul>
<h4 id="å®ç°å‡½æ•°å¯¹è±¡">å®ç°å‡½æ•°å¯¹è±¡
</h4><p>åœ¨ Go ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹å’Œé—­åŒ…æ¥å®ç°ç±»ä¼¼äº C++ å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰çš„åŠŸèƒ½ã€‚å‡½æ•°ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’å’Œè¿”å›å€¼ï¼Œè€Œé—­åŒ…å¯ä»¥æ•è·å¤–éƒ¨å˜é‡å¹¶å½¢æˆä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">MyFunc</span> <span class="kd">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å‡½æ•°å¯¹è±¡, è¿”å›ç±»å‹ä¸º MyFunc
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">AddN</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="nx">MyFunc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">x</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">n</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">addTwo</span> <span class="o">:=</span> <span class="nf">AddN</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è°ƒç”¨å‡½æ•°å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">result</span> <span class="o">:=</span> <span class="nf">addTwo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// è¾“å‡ºï¼š5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ†å±‚è®¾è®¡çš„é—®é¢˜</p>
<ul>
<li>ä¸åŒå±‚æ¬¡ä¹‹é—´çš„å¦‚ä½•è½¬åŒ–</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Response</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">StatusCode</span> <span class="kt">int32</span>  <span class="s">`json:&#34;status_code&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">StatusMsg</span>  <span class="kt">string</span> <span class="s">`json:&#34;status_msg,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Video</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Id</span>            <span class="kt">int64</span>  <span class="s">`json:&#34;id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Author</span>        <span class="nx">User</span>   <span class="s">`json:&#34;author&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">PlayUrl</span>       <span class="kt">string</span> <span class="s">`json:&#34;play_url&#34; json:&#34;play_url,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CoverUrl</span>      <span class="kt">string</span> <span class="s">`json:&#34;cover_url,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">FavoriteCount</span> <span class="kt">int64</span>  <span class="s">`json:&#34;favorite_count,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CommentCount</span>  <span class="kt">int64</span>  <span class="s">`json:&#34;comment_count,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">IsFavorite</span>    <span class="kt">bool</span>   <span class="s">`json:&#34;is_favorite,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Comment</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Id</span>         <span class="kt">int64</span>  <span class="s">`json:&#34;id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">User</span>       <span class="nx">User</span>   <span class="s">`json:&#34;user&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Content</span>    <span class="kt">string</span> <span class="s">`json:&#34;content,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CreateDate</span> <span class="kt">string</span> <span class="s">`json:&#34;create_date,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Id</span>            <span class="kt">int64</span>  <span class="s">`json:&#34;id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Name</span>          <span class="kt">string</span> <span class="s">`json:&#34;name,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">FollowCount</span>   <span class="kt">int64</span>  <span class="s">`json:&#34;follow_count,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">FollowerCount</span> <span class="kt">int64</span>  <span class="s">`json:&#34;follower_count,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">IsFollow</span>      <span class="kt">bool</span>   <span class="s">`json:&#34;is_follow,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Message</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Id</span>         <span class="kt">int64</span>  <span class="s">`json:&#34;id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Content</span>    <span class="kt">string</span> <span class="s">`json:&#34;content,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CreateTime</span> <span class="kt">string</span> <span class="s">`json:&#34;create_time,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MessageSendEvent</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UserId</span>     <span class="kt">int64</span>  <span class="s">`json:&#34;user_id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ToUserId</span>   <span class="kt">int64</span>  <span class="s">`json:&#34;to_user_id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">MsgContent</span> <span class="kt">string</span> <span class="s">`json:&#34;msg_content,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MessagePushEvent</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">FromUserId</span> <span class="kt">int64</span>  <span class="s">`json:&#34;user_id,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">MsgContent</span> <span class="kt">string</span> <span class="s">`json:&#34;msg_content,omitempty&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UserId</span> <span class="kt">int64</span> <span class="s">`gorm:&#34;primary_key&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Name</span>   <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// FollowingCount  int64  `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// FollowerCount   int64  `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Password</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Avatar          string `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// BackgroundImage string `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Signature</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// TotalFavorited  int64  `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// WorkCount       int64  `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// FavoriteCount   int64  `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// CreateAt        time.Time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">// DeleteAt        time.Time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Video</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">VideoId</span>       <span class="kt">int64</span> <span class="s">`gorm:&#34;primaryKey&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UserId</span>        <span class="kt">int64</span>
</span></span><span class="line"><span class="cl">	<span class="nx">PlayUrl</span>       <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CoverUrl</span>      <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">FavoriteCount</span> <span class="kt">int64</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CommentCount</span>  <span class="kt">int64</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// Title    string `gorm:&#34;default:(-)&#34;`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">CreateAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UpdateAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">	<span class="nx">DeleteAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">GetUserDao</span><span class="p">()</span> <span class="o">*</span><span class="nx">UserDao</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">UserDao</span><span class="p">)</span> <span class="nf">CreateUser</span><span class="p">(</span><span class="nx">user</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="p">(</span><span class="kt">int64</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">UserDao</span><span class="p">)</span> <span class="nf">FindUserByName</span><span class="p">(</span><span class="nx">username</span> <span class="kt">string</span><span class="p">)</span>  <span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="o">*</span><span class="nx">UserDao</span><span class="p">)</span> <span class="nf">FindUserById</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">GetVideoDao</span><span class="p">()</span> <span class="o">*</span><span class="nx">VideoDao</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">VideoDao</span><span class="p">)</span> <span class="nf">CreateVideo</span><span class="p">(</span><span class="nx">video</span> <span class="o">*</span><span class="nx">Video</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Video</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">d</span> <span class="o">*</span><span class="nx">VideoDao</span><span class="p">)</span> <span class="nf">FindVideoById</span><span class="p">(</span><span class="nx">id</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Video</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">VideoDao</span><span class="p">)</span> <span class="nf">QueryVideoByUserId</span><span class="p">(</span><span class="nx">userId</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">([]</span><span class="o">*</span><span class="nx">Video</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ ¹æ®æ—¶é—´å’Œéœ€è¦æŸ¥è¯¢çš„æ¡æ•°ï¼Œè·å–videoåˆ—è¡¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">VideoDao</span><span class="p">)</span> <span class="nf">QueryVideo</span><span class="p">(</span><span class="nx">date</span> <span class="o">*</span><span class="kt">string</span><span class="p">,</span> <span class="nx">limit</span> <span class="kt">int</span><span class="p">)</span> <span class="p">[]</span><span class="o">*</span><span class="nx">Video</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="test">test
</h3><p>Go è¯­è¨€ä¸­çš„æµ‹è¯•ä¾èµ– go test å‘½ä»¤ã€‚ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„ Go ä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œå¹¶ä¸éœ€è¦å­¦ä¹ æ–°çš„è¯­æ³•ã€è§„åˆ™æˆ–å·¥å…·ã€‚</p>
<p>go test å‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥_test.go ä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯ go test æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢« go build ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨ <code>*_test.go</code> æ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œ<strong>å•å…ƒæµ‹è¯•å‡½æ•°</strong>ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">ç±»å‹</th>
          <th style="text-align: left">æ ¼å¼</th>
          <th style="text-align: left">ä½œç”¨</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">æµ‹è¯•å‡½æ•°</td>
          <td style="text-align: left">å‡½æ•°å<strong>å‰ç¼€</strong>ä¸º Test</td>
          <td style="text-align: left">æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>
      </tr>
      <tr>
          <td style="text-align: left">åŸºå‡†å‡½æ•°</td>
          <td style="text-align: left">å‡½æ•°åå‰ç¼€ä¸º Benchmark</td>
          <td style="text-align: left">æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>
      </tr>
      <tr>
          <td style="text-align: left">ç¤ºä¾‹å‡½æ•°</td>
          <td style="text-align: left">å‡½æ•°åå‰ç¼€ä¸º Example</td>
          <td style="text-align: left">ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹æ–‡æ¡£</td>
      </tr>
  </tbody>
</table></div>
<p>Golang å•å…ƒæµ‹è¯•å¯¹æ–‡ä»¶åå’Œæ–¹æ³•åï¼Œå‚æ•°éƒ½æœ‰å¾ˆä¸¥æ ¼çš„è¦æ±‚ã€‚</p>
<ul>
<li>
<p>æ–‡ä»¶åå¿…é¡»ä»¥<code>xx_test.go</code>å‘½å</p>
</li>
<li>
<p>æ–¹æ³•å¿…é¡»æ˜¯<code>Test[^a-z]</code>å¼€å¤´</p>
</li>
<li>
<p>æ–¹æ³•å‚æ•°å¿…é¡»<code> t *testing.T</code></p>
</li>
<li>
<p>ä½¿ç”¨go testæ‰§è¡Œå•å…ƒæµ‹è¯•</p>
</li>
</ul>
<h4 id="go-testå‚æ•°">go testå‚æ•°
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go <span class="nb">test</span> <span class="o">[</span>-c<span class="o">]</span> <span class="o">[</span>-i<span class="o">]</span> <span class="o">[</span>build flags<span class="o">]</span> <span class="o">[</span>packages<span class="o">]</span> <span class="o">[</span>flags <span class="k">for</span> <span class="nb">test</span> binary<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// split/split.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">split</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;strings&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// split package with a single split function.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Split slices s into all substrings separated by sep and
</span></span></span><span class="line"><span class="cl"><span class="c1">// returns a slice of the substrings between those separators.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">sep</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">result</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">i</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">sep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">i</span> <span class="p">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">result</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">s</span><span class="p">[:</span><span class="nx">i</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="nx">s</span> <span class="p">=</span> <span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">        <span class="nx">i</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">sep</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">result</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª split_test.go çš„æµ‹è¯•æ–‡ä»¶ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªæµ‹è¯•å‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// split/split_test.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">split</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;reflect&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;testing&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestSplit</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// æµ‹è¯•å‡½æ•°åå¿…é¡»ä»¥Testå¼€å¤´ï¼Œå¿…é¡»æ¥æ”¶ä¸€ä¸ª*testing.Tç±»å‹å‚æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">got</span> <span class="o">:=</span> <span class="nf">Split</span><span class="p">(</span><span class="s">&#34;a:b:c&#34;</span><span class="p">,</span> <span class="s">&#34;:&#34;</span><span class="p">)</span>         <span class="c1">// ç¨‹åºè¾“å‡ºçš„ç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">want</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">,</span> <span class="s">&#34;c&#34;</span><span class="p">}</span>    <span class="c1">// æœŸæœ›çš„ç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">!</span><span class="nx">reflect</span><span class="p">.</span><span class="nf">DeepEqual</span><span class="p">(</span><span class="nx">want</span><span class="p">,</span> <span class="nx">got</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// å› ä¸ºsliceä¸èƒ½æ¯”è¾ƒç›´æ¥ï¼Œå€ŸåŠ©åå°„åŒ…ä¸­çš„æ–¹æ³•æ¯”è¾ƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;excepted:%v, got:%v&#34;</span><span class="p">,</span> <span class="nx">want</span><span class="p">,</span> <span class="nx">got</span><span class="p">)</span> <span class="c1">// æµ‹è¯•å¤±è´¥è¾“å‡ºé”™è¯¯æç¤º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•ç»“æœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ go <span class="nb">test</span>
</span></span><span class="line"><span class="cl">PASS
</span></span><span class="line"><span class="cl">ok      main/ttt        0.002s
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="log">log
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"></code></pre></td></tr></table>
</div>
</div><h3 id="os">OS
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ä¼šæˆªæ–­å®ƒï¼ˆä¸ºç©ºæ–‡ä»¶ï¼‰ã€‚å¦‚æœæˆåŠŸï¼Œè¿”å›çš„æ–‡ä»¶å¯¹è±¡å¯ç”¨äº I/Oï¼›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">file</span> <span class="o">*</span><span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">file</span> <span class="o">*</span><span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldpath</span><span class="p">,</span> <span class="nx">newpath</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="io">IO
</h3><h4 id="1reader">1ã€Reader
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Reader</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Reader æ˜¯åŒ…è£…åŸºæœ¬ Read æ–¹æ³•çš„æ¥å£ã€‚</p>
<p>Read æœ€å¤šå°† len (p) ä¸ªå­—èŠ‚è¯»å…¥ pã€‚å®ƒè¿”å›è¯»å–çš„å­—èŠ‚æ•° (0 &lt;= n &lt;= len (p)) å’Œé‡åˆ°çš„é”™è¯¯ã€‚å³ä½¿ Read è¿”å› n &lt; len (p)ï¼Œå®ƒä¹Ÿå¯èƒ½åœ¨è°ƒç”¨æœŸé—´ä½¿ç”¨æ‰€æœ‰ p ä½œä¸ºæš‚å­˜ç©ºé—´ã€‚</p>
<p>å¦‚æœæœ‰ä¸€äº›æ•°æ®å¯ç”¨ï¼Œä½†é•¿åº¦ä¸ä¸º len (p) ï¼Œåˆ™ Read é€šå¸¸ä¼šè¿”å›å¯ç”¨çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ›´å¤šæ•°æ®ã€‚</p>
<p>å½“ Read é‡åˆ°é”™è¯¯ï¼Œæˆ–è€…åœ¨æˆåŠŸè¯»å– n &gt; 0 ä¸ªå­—èŠ‚åï¼Œé‡åˆ° end-of-file æ¡ä»¶æ—¶ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°ã€‚å®ƒå¯èƒ½ä¼šä»åŒä¸€æ¬¡è°ƒç”¨ä¸­è¿”å›ï¼ˆéç©ºï¼‰é”™è¯¯ï¼Œæˆ–è€…ä»åç»­è°ƒç”¨ä¸­è¿”å›é”™è¯¯ï¼ˆå¹¶ä¸” n == 0ï¼‰ã€‚
è¿™ç§æƒ…å†µä¸€ä¸ªä¾‹å­æ˜¯ï¼šReader åœ¨è¯»å–åˆ°è¾“å…¥æµæœ«å°¾æ—¶ï¼Œè¿”å›ä¸€ä¸ªéé›¶çš„å­—èŠ‚æ•°ï¼Œå¹¶è¿”å› err == EOF æˆ–è€… err == nilã€‚ä¸‹ä¸€æ¬¡è¯»å–åº”è¯¥è¿”å› 0ï¼ŒEOFã€‚</p>
<p>åœ¨è€ƒè™‘é”™è¯¯é”™è¯¯ä¹‹å‰ï¼Œè°ƒç”¨è€…åº”å§‹ç»ˆå¤„ç†è¿”å›çš„ n &gt; 0 å­—èŠ‚ã€‚è¿™æ ·åšå¯ä»¥æ­£ç¡®å¤„ç†è¯»å–æŸäº›å­—èŠ‚åå‘ç”Ÿçš„ I/O é”™è¯¯ä»¥åŠå…è®¸çš„ EOF è¡Œä¸ºã€‚</p>
<p>å¯¹äº Read çš„å®ç°ï¼Œä¸é¼“åŠ±åŒæ—¶è¿”å›é›¶å­—èŠ‚è®¡æ•°å’Œ nil é”™è¯¯ï¼Œé™¤é len (p) == 0ã€‚
è°ƒç”¨è€…åº”å°†è¿”å› 0 å’Œ nil è§†ä¸ºè¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿä»»ä½•äº‹æƒ…ï¼›ç‰¹åˆ«æ˜¯å®ƒä¸è¡¨ç¤º EOFã€‚</p>
<p>å®ç°ä¸å¾—æŒæœ‰ pã€‚</p>
<h4 id="2writer">2ã€Writer
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Writer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Writer æ˜¯å°è£…äº†åŸºæœ¬ Write æ–¹æ³•çš„æ¥å£ã€‚</p>
<p>Write å°† len (p) ä¸ªå­—èŠ‚ä» p å†™å…¥åº•å±‚æ•°æ®æµã€‚
å®ƒè¿”å›ä» p (0 &lt;= n &lt;= len (p)) å†™å…¥çš„å­—èŠ‚æ•°ï¼Œä»¥åŠé‡åˆ°çš„ä»»ä½•å¯¼è‡´å†™å…¥æå‰åœæ­¢çš„é”™è¯¯ã€‚
å¦‚æœè¿”å› n &lt;len (p)ï¼Œåˆ™å†™å…¥å¿…é¡»è¿”å›éé›¶é”™è¯¯ã€‚
å†™å…¥ä¸èƒ½ä¿®æ”¹åˆ‡ç‰‡æ•°æ®ï¼Œå³ä½¿æ˜¯ä¸´æ—¶çš„ã€‚</p>
<p>å®ç°ä¸å¾—ä¿ç•™ pã€‚</p>
<h4 id="3closer">3ã€Closer
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Closer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Close</span><span class="p">()</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Closer æ˜¯å°è£…äº†åŸºæœ¬ Close æ–¹æ³•çš„æ¥å£ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ Close åçš„è¡Œä¸ºæœªå®šä¹‰ã€‚
å…·ä½“å®ç°çš„è¡Œä¸ºå¯ä»¥æŸ¥çœ‹æ–‡æ¡£ã€‚</p>
<h4 id="4seeker">4ã€Seeker
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Seeker</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Seek</span><span class="p">(</span><span class="nx">offset</span> <span class="kt">int64</span><span class="p">,</span> <span class="nx">whence</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kt">int64</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Seeker æ˜¯å°è£…äº†åŸºæœ¬ Seek æ–¹æ³•çš„æ¥å£ã€‚</p>
<p>Seek å°†ä¸‹ä¸€æ¬¡è¯»å–æˆ–å†™å…¥çš„åç§»é‡è®¾ç½®ä¸ºåç§»é‡ï¼Œæ ¹æ® <code>wherece</code> è¿›è¡Œè§£é‡Šï¼š</p>
<ul>
<li><code>SeekStart</code> è¡¨ç¤ºç›¸å¯¹äºæ–‡ä»¶çš„å¼€å¤´ï¼Œ</li>
<li><code>SeekCurrent</code> è¡¨ç¤ºç›¸å¯¹äºå½“å‰åç§»é‡ï¼Œå¹¶ä¸”</li>
<li><code>SeekEnd</code> è¡¨ç¤ºç›¸å¯¹äºç»ˆç‚¹ï¼ˆä¾‹å¦‚ï¼Œoffset = -2 æŒ‡å®šæ–‡ä»¶çš„å€’æ•°ç¬¬äºŒä¸ªå­—èŠ‚ï¼‰ã€‚</li>
</ul>
<p>Seek è¿”å›ç›¸å¯¹äºæ–‡ä»¶å¼€å¤´çš„æ–°åç§»é‡æˆ–é”™è¯¯ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p>
<p>Seek åˆ°å¼€å§‹ä¹‹å‰çš„åç§»é‡æ˜¯é”™è¯¯çš„ã€‚
å¯ä»¥å…è®¸ Seek ä»»ä½•æ­£åç§»é‡ï¼Œä½†å¦‚æœæ–°åç§»é‡è¶…è¿‡åº•å±‚å¯¹è±¡çš„å¤§å°ï¼Œåˆ™åç»­ I/O æ“ä½œçš„è¡Œä¸ºå–å†³äºå®ç°ã€‚</p>
<h3 id="bufio">bufio
</h3><p>bufio æ˜¯ Go è¯­è¨€æ ‡å‡†åº“ä¸­ç”¨äºç¼“å­˜ I/O çš„åŒ…ã€‚å½“ç¨‹åºé¢‘ç¹è¿›è¡Œ I/O è¯»å†™æ“ä½œæ—¶ï¼Œä½¿ç”¨ bufio åŒ…å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œå¤§å¤§æé«˜ç¨‹åºæ€§èƒ½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// NewReader åˆ›å»ºä¸€ä¸ªå…·æœ‰é»˜è®¤å¤§å°ç¼“å†²ã€ä» r è¯»å–çš„ * Readerã€‚NewReader ç›¸å½“äº NewReaderSize (rd, 4096)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">NewReader</span><span class="p">(</span><span class="nx">rd</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="o">*</span><span class="nx">Reader</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// NewReaderSize åˆ›å»ºä¸€ä¸ªå…·æœ‰æœ€å°‘æœ‰ size å°ºå¯¸çš„ç¼“å†²ã€ä» r è¯»å–çš„ Readerã€‚å¦‚æœå‚æ•° r å·²ç»æ˜¯ä¸€ä¸ªå…·æœ‰è¶³å¤Ÿå¤§ç¼“å†²çš„ Reader ç±»å‹å€¼ï¼Œä¼šè¿”å› rã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">NewReaderSize</span><span class="p">(</span><span class="nx">rd</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span> <span class="nx">size</span> <span class="kt">int</span><span class="p">)</span> <span class="o">*</span><span class="nx">Reader</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Reset ä¸¢å¼ƒç¼“å†²ä¸­çš„æ•°æ®ï¼Œæ¸…é™¤ä»»ä½•é”™è¯¯ï¼Œå°† b é‡è®¾ä¸ºå…¶ä¸‹å±‚ä» r è¯»å–æ•°æ®ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">Reader</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">(</span><span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Buffered è¿”å›ç¼“å†²ä¸­ç°æœ‰çš„å¯è¯»å–çš„å­—èŠ‚æ•°ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">Reader</span><span class="p">)</span> <span class="nf">Buffered</span><span class="p">()</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è¿”å›è¾“å…¥æµçš„ä¸‹ n ä¸ªå­—èŠ‚, è€Œä¸ä¼šç§»åŠ¨è¯»å–ä½ç½®ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">Reader</span><span class="p">)</span> <span class="nf">Peek</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="string">string
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// strings.NewReader() å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºå®ç°äº† io.Reader æ¥å£çš„è¯»å–å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">NewReader</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="nx">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="gorm">GORM
</h3><p><strong>ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†</strong>æ¶æ˜¯ä¸€ç§è½¯ä»¶å·¥å…·ï¼Œç”¨äºåœ¨é¢å‘<strong>å¯¹è±¡ç¼–ç¨‹è¯­è¨€å’Œå…³ç³»å‹æ•°æ®åº“</strong>ä¹‹é—´å»ºç«‹<strong>æ˜ å°„</strong>å…³ç³»ã€‚å®ƒæä¾›äº†ä¸€ç§å°†æ•°æ®åº“è¡¨æ ¼çš„æ•°æ®æ˜ å°„åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡çš„æ–¹æ³•ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥æ“ä½œæ•°æ®åº“ã€‚</p>
<p>ORM æ¡†æ¶çš„ä¸»è¦ç›®æ ‡æ˜¯è§£å†³å¯¹è±¡æ¨¡å‹ä¸å…³ç³»æ•°æ®åº“ä¹‹é—´çš„ä¸åŒ¹é…é—®é¢˜ã€‚åœ¨ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œæ•°æ®æ˜¯ä»¥è¡¨æ ¼çš„å½¢å¼è¿›è¡Œç»„ç»‡å’Œå­˜å‚¨çš„ï¼Œè€Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°æ®æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼è¡¨ç¤ºçš„ã€‚ORM æ¡†æ¶é€šè¿‡è‡ªåŠ¨å°†å¯¹è±¡è½¬æ¢ä¸ºæ•°æ®åº“ä¸­çš„è¡¨æ ¼ä»¥åŠè¡¨æ ¼ä¸­çš„è¡Œå’Œåˆ—è½¬æ¢ä¸ºå¯¹è±¡çš„å±æ€§å’Œå…³ç³»ï¼Œå®ç°äº†é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å’Œå…³ç³»å‹æ•°æ®åº“ä¹‹é—´çš„æ— ç¼é›†æˆã€‚</p>
<p>ORM æ¡†æ¶é€šå¸¸æä¾›äº†ä¸€ç»„ API å’Œå·¥å…·ï¼Œç”¨äºæ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š</p>
<ol>
<li>å¯¹è±¡å…³ç³»æ˜ å°„ï¼šå°†æ•°æ®åº“è¡¨æ ¼çš„æ•°æ®æ˜ å°„åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„å¯¹è±¡ï¼Œå¹¶å°†å¯¹è±¡çš„å±æ€§å’Œå…³ç³»æ˜ å°„åˆ°æ•°æ®åº“çš„åˆ—å’Œè¡Œã€‚</li>
<li>æ•°æ®åº“æ“ä½œï¼šæä¾›äº†ä¸€ç»„ç®€åŒ–çš„æ–¹æ³•æ¥æ‰§è¡Œå¸¸è§çš„æ•°æ®åº“æ“ä½œï¼Œå¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’ŒæŸ¥è¯¢æ•°æ®ã€‚</li>
<li>æ•°æ®åº“äº‹åŠ¡ç®¡ç†ï¼šæ”¯æŒäº‹åŠ¡æ“ä½œï¼Œç¡®ä¿æ•°æ®åº“æ“ä½œçš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li>
<li>æŸ¥è¯¢è¯­è¨€ï¼šæä¾›äº†ä¸€ç§ç±»ä¼¼äºç¼–ç¨‹è¯­è¨€çš„æ¥å£ï¼Œç”¨äºæŒ‡å®šå’Œæ‰§è¡Œå¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢ã€‚</li>
<li>ç¼“å­˜ç®¡ç†ï¼šæä¾›äº†ç¼“å­˜æœºåˆ¶ï¼Œä»¥å‡å°‘å¯¹æ•°æ®åº“çš„é¢‘ç¹è®¿é—®ï¼Œå¹¶æé«˜æ€§èƒ½ã€‚</li>
<li>æ•°æ®åº“è¿ç§»ï¼šç®€åŒ–æ•°æ®åº“ç»“æ„çš„å˜æ›´å’Œè¿ç§»æ“ä½œï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œæ— ç¼å‡çº§ã€‚</li>
</ol>
<p><a class="link" href="https://gorm.cn/zh_CN/docs/models.html"  target="_blank" rel="noopener"
    >æ¨¡å‹å®šä¹‰ | GORM - The fantastic ORM library for Golang, aims to be developer friendly.</a></p>
<p><a class="link" href="https://blog.csdn.net/yoyogu/article/details/109318626"  target="_blank" rel="noopener"
    >go è¯­è¨€ gorm åŸºæœ¬ä½¿ç”¨_go gorm_å«å…‰å›ï½çš„åšå®¢ - CSDN åšå®¢</a></p>
<ul>
<li>Gormä½¿ç”¨åä¸º<code>ID</code>çš„å­—æ®µä½œä¸ºä¸»é”®</li>
<li>GORM æ”¯æŒ MySQLSQLServerã€ PostgreSQLSQLite.</li>
</ul>
<h4 id="demo">demo
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;gorm.io/driver/mysql&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;gorm.io/gorm&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span> <span class="c1">// é»˜è®¤è¡¨åæ˜¯`users`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">gorm</span><span class="p">.</span><span class="nx">Model</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// refer https://github.com/go-sql-driver/mysql#dsn-data-source-name for details
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">dsn</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s:%s@tcp(%s:%s)/%s?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_USER&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_PASSWORD&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_HOST&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_PORT&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// conf.UserName,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// conf.Password,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// conf.Url,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// conf.Port,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">conf</span><span class="p">.</span><span class="nx">DBName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ gorm.Config å¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ Open å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">gorm</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">mysql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">dsn</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">gorm</span><span class="p">.</span><span class="nx">Config</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è‡ªåŠ¨è¿ç§»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">.</span><span class="nf">AutoMigrate</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;å¼ ä¸‰&#34;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="c1">// æŸ¥è¯¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">res</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;å¼ ä¸‰&#34;</span><span class="p">}).</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">res</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¸ä¸º å­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">models</span><span class="p">.</span><span class="nx">User</span><span class="p">{</span><span class="nx">UserId</span><span class="p">:</span><span class="mi">17</span><span class="p">}).</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="s">&#34;user_id=?&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">).</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">db</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">res</span><span class="p">,</span> <span class="s">&#34;hobby=?&#34;</span><span class="p">,</span> <span class="s">&#34;è¶³çƒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰¹é‡æŸ¥è¯¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">var</span> <span class="nx">list</span> <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">User</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">models</span><span class="p">.</span><span class="nx">SqlSession</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="s">&#34;user_id&lt;?&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">list</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%+v&#34;</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="c1">// è¾“å‡ºäº†1~17
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// å•åˆ—ä¿®æ”¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// è¯¥åˆ—åä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ GORM å°†ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œä¹Ÿä¸ä¼šè¿”å›ä»»ä½•é”™è¯¯ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">db</span><span class="p">.</span><span class="nf">Model</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{}).</span><span class="nf">Where</span><span class="p">(</span><span class="s">&#34;user_id = ?&#34;</span><span class="p">,</span> <span class="mi">17</span><span class="p">).</span><span class="nf">Update</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;changed&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Close
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">sqlDB</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">DB</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sqlDB</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å®šä¹‰æ•°æ®ç±»å‹">å®šä¹‰æ•°æ®ç±»å‹
</h4><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">å­—æ®µ</th>
          <th style="text-align: left">è§£é‡Š</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">autoIncrement</td>
          <td style="text-align: left">æŒ‡å®šåˆ—ä¸ºè‡ªåŠ¨å¢é•¿</td>
      </tr>
      <tr>
          <td style="text-align: left">primaryKey</td>
          <td style="text-align: left">å°†åˆ—å®šä¹‰ä¸ºä¸»é”®</td>
      </tr>
      <tr>
          <td style="text-align: left">unique</td>
          <td style="text-align: left">å°†åˆ—å®šä¹‰ä¸ºå”¯ä¸€é”®</td>
      </tr>
      <tr>
          <td style="text-align: left">default</td>
          <td style="text-align: left">å®šä¹‰åˆ—çš„é»˜è®¤å€¼</td>
      </tr>
      <tr>
          <td style="text-align: left">not null</td>
          <td style="text-align: left">æŒ‡å®šåˆ—ä¸º NOT NULL</td>
      </tr>
      <tr>
          <td style="text-align: left">autoCreateTime</td>
          <td style="text-align: left">åˆ›å»ºæ—¶è¿½è¸ªå½“å‰æ—¶é—´ï¼Œå¯¹äº <code>int</code> å­—æ®µï¼Œå®ƒä¼šè¿½è¸ªæ—¶é—´æˆ³ç§’æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>nano</code>/<code>milli</code> æ¥è¿½è¸ªçº³ç§’ã€æ¯«ç§’æ—¶é—´æˆ³ï¼Œä¾‹å¦‚ï¼š<code>autoCreateTime:nano</code></td>
      </tr>
      <tr>
          <td style="text-align: left">autoUpdateTime</td>
          <td style="text-align: left">åˆ›å»º / æ›´æ–°æ—¶è¿½è¸ªå½“å‰æ—¶é—´ï¼Œå¯¹äº <code>int</code> å­—æ®µï¼Œå®ƒä¼šè¿½è¸ªæ—¶é—´æˆ³ç§’æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>nano</code>/<code>milli</code> æ¥è¿½è¸ªçº³ç§’ã€æ¯«ç§’æ—¶é—´æˆ³ï¼Œä¾‹å¦‚ï¼š<code>autoUpdateTime:milli</code></td>
      </tr>
  </tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// å†…éƒ¨å®šä¹‰ç±»å‹, ç›´æ¥å¼•ç”¨å°±å¥½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Model</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ID</span>        <span class="kt">uint</span>           <span class="s">`gorm:&#34;primaryKey&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">CreatedAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">  <span class="nx">UpdatedAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">  <span class="nx">DeletedAt</span> <span class="nx">gorm</span><span class="p">.</span><span class="nx">DeletedAt</span> <span class="s">`gorm:&#34;index&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å¯¹äºåŒ¿åå­—æ®µï¼ŒGORM ä¼šå°†å…¶å­—æ®µåŒ…å«åˆ°å…¶çˆ¶ç»“æ„ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1">// è¡¨åé»˜è®¤æ˜¯æ¨¡å‹çš„å¤æ•°å½¢å¼ï¼Œåˆ—åé»˜è®¤æ˜¯å­—æ®µåçš„é©¼å³°å½¢å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span> <span class="c1">// é»˜è®¤è¡¨åæ˜¯`users`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">gorm</span><span class="p">.</span><span class="nx">Model</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// equals
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ID</span>        <span class="kt">uint</span>           <span class="s">`gorm:&#34;primaryKey&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">CreatedAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">  <span class="nx">UpdatedAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">  <span class="nx">DeletedAt</span> <span class="nx">gorm</span><span class="p">.</span><span class="nx">DeletedAt</span> <span class="s">`gorm:&#34;index&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// default çš„ä½¿ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ID</span>   <span class="kt">uint</span>    <span class="s">`gorm:&#34;not null;comment:&#39;ç”¨æˆ·ID&#39;&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Name</span> <span class="kt">string</span>  <span class="s">`gorm:&#34;type:varchar(50);default:&#39;å¼ ä¸‰&#39;;comment:&#39;å§“å&#39;&#34;`</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Age</span>  <span class="kt">int</span>     <span class="s">`gorm:&#34;default:&#39;18&#39;;comment:&#39;å¹´é¾„&#39;&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">UserId</span>     <span class="kt">int64</span> <span class="s">`gorm:&#34;primary_key&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Password</span>    <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">signature</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">CreatedAt</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>  <span class="s">`gorm:&#34;default(autoCreateTime)&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// DeleteAt time.Time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¿æ¥-å…³é—­æ•°æ®åº“">è¿æ¥/ å…³é—­æ•°æ®åº“
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;gorm.io/driver/mysql&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;gorm.io/gorm&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// refer https://github.com/go-sql-driver/mysql#dsn-data-source-name for details
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">dsn</span> <span class="o">:=</span> <span class="s">&#34;user:pass@tcp(127.0.0.1:3306)/dbname?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ gorm.Config å¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ Open å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">gorm</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">mysql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">dsn</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">gorm</span><span class="p">.</span><span class="nx">Config</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="c1">// Close
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  	<span class="nx">sqlDB</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">DB</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sqlDB</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ç¯å¢ƒå˜é‡è¿æ¥æ•°æ®åº“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;database/sql&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;strconv&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">_</span> <span class="s">&#34;github.com/go-sql-driver/mysql&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">db</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">sql</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;mysql&#34;</span><span class="p">,</span> <span class="nf">getConnectionString</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="p">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Ping</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Connected to MySQL database!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">getConnectionString</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_HOST&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">port</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_PORT&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">user</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_USER&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">password</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getenv</span><span class="p">(</span><span class="s">&#34;MYSQL_PASSWORD&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">database</span> <span class="o">:=</span> <span class="s">&#34;mydatabase&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">portInt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="nx">port</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s:%s@tcp(%s:%d)/%s&#34;</span><span class="p">,</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">server</span><span class="p">,</span> <span class="nx">portInt</span><span class="p">,</span> <span class="nx">database</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">dsn</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;%s:%s@tcp(%s:%s)/%s?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">conf</span><span class="p">.</span><span class="nx">UserName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">conf</span><span class="p">.</span><span class="nx">Password</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">conf</span><span class="p">.</span><span class="nx">Url</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">conf</span><span class="p">.</span><span class="nx">Port</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">conf</span><span class="p">.</span><span class="nx">DBName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åˆ›å»º">åˆ›å»º
</h4><ul>
<li>
<p>GORM åœ¨åˆ›å»ºå¯¹è±¡æ—¶<strong>ä¸éœ€è¦æ˜¾å¼</strong>åœ°æŒ‡å®šè¦å°†å…¶åˆ›å»ºåˆ°å“ªå¼ è¡¨ä¸­ã€‚GORM ä¼šæ ¹æ®æ‚¨å®šä¹‰çš„æ¨¡å‹ç±»å’Œæ•°æ®åº“çš„æ˜ å°„å…³ç³»ï¼Œè‡ªåŠ¨ç¡®å®šè¦åˆ›å»ºçš„è¡¨å’Œåˆ—ã€‚</p>
<p>æ‚¨åªéœ€è¦å®šä¹‰æ¨¡å‹ç±»ï¼Œå¹¶åœ¨éœ€è¦æ—¶è°ƒç”¨ Gorm çš„åˆ›å»ºæ–¹æ³•å³å¯ã€‚Gorm ä¼šè‡ªåŠ¨å¤„ç†æ•°æ®åº“æ“ä½œï¼Œå¹¶ç¡®ä¿åœ¨æ•°æ®åº“ä¸­æ­£ç¡®åœ°åˆ›å»ºå¯¹è±¡ã€‚</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">user</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;Jinzhu&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="nx">Birthday</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">result</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span> <span class="c1">// pass pointer of data to Create
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ‰¹é‡å¤„ç†æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">users</span> <span class="o">:=</span> <span class="p">[]</span><span class="o">*</span><span class="nx">User</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;Jinzhu&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="nx">Birthday</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;Jackson&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="nx">Birthday</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">result</span> <span class="o">:=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="nx">users</span><span class="p">)</span> <span class="c1">// pass a slice to insert multiple row
</span></span></span><span class="line"><span class="cl"><span class="c1">// å¦‚æœ users ä¸­çš„ user å·²ç»å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚å…·ä½“çš„é”™è¯¯ç±»å‹å’Œé”™è¯¯ä¿¡æ¯å–å†³äºæ‰€ä½¿ç”¨çš„ ORM åº“å’Œæ•°æ®åº“é©±åŠ¨ç¨‹åºã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">result</span><span class="p">.</span><span class="nx">Error</span>        <span class="c1">// returns error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">result</span><span class="p">.</span><span class="nx">RowsAffected</span> <span class="c1">// returns inserted records count
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç®€å•æŸ¥è¯¢">ç®€å•æŸ¥è¯¢
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// å‡½æ•°åŸå‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">DB</span><span class="p">.</span><span class="nf">First</span><span class="p">(</span><span class="nx">dest</span> <span class="kd">interface</span><span class="p">{},</span> <span class="nx">conds</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è·å–ç¬¬ä¸€æ¡è®°å½•ï¼ŒæŒ‰ä¸»é”®æ’åº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">select</span> <span class="o">*</span> <span class="nx">from</span> <span class="nx">users</span> <span class="nx">order</span> <span class="nx">by</span> <span class="nx">id</span> <span class="nx">limit</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è·å–æœ€åä¸€æ¡è®°å½•ï¼ŒæŒ‰ä¸»é”®æ’åº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Last</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">select</span> <span class="o">*</span> <span class="nx">from</span> <span class="nx">users</span> <span class="nx">order</span> <span class="nx">by</span> <span class="nx">id</span> <span class="nx">desc</span> <span class="nx">limit</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è·å–æ‰€æœ‰è®°å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">select</span> <span class="o">*</span> <span class="nx">from</span> <span class="nx">users</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// GORM å…è®¸é€šè¿‡å†…è”æ¡ä»¶æŒ‡å®šä¸»é”®æ¥æ£€ç´¢å¯¹è±¡ï¼Œä½†åªæ”¯æŒæ•´å½¢æ•°å€¼ï¼Œå› ä¸º string å¯èƒ½å¯¼è‡´ SQL æ³¨å…¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1">// select * from users where id =10;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å¦‚æœè¡¨é‡Œæ²¡æœ‰æ•°æ®ï¼Œä¼šæŠ¥é”™  result.Errorè¿”å›:ErrRecordNotFound,
</span></span></span><span class="line"><span class="cl"><span class="c1">// æ£€æŸ¥ ErrRecordNotFound é”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">errors</span><span class="p">.</span><span class="nf">Is</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">Error</span><span class="p">,</span> <span class="nx">gorm</span><span class="p">.</span><span class="nx">ErrRecordNotFound</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="select-è¯­å¥">select è¯­å¥
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// select name, age from users;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="s">&#34;age&#34;</span><span class="p">).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Select</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="s">&#34;age&#34;</span><span class="p">}).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">Table</span><span class="p">(</span><span class="s">&#34;users&#34;</span><span class="p">).</span><span class="nf">Select</span><span class="p">(</span><span class="s">&#34;COALESCE(age,?)&#34;</span><span class="p">,</span> <span class="mi">42</span><span class="p">).</span><span class="nf">Rows</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">SELECT</span> <span class="nf">COALESCE</span><span class="p">(</span><span class="nx">age</span><span class="p">,</span><span class="err">&#39;</span><span class="mi">42</span><span class="err">&#39;</span><span class="p">)</span> <span class="nx">FROM</span> <span class="nx">users</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Struct
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;jinzhu&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">20</span><span class="p">}).</span><span class="nf">First</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// SELECT * FROM users WHERE name = &#34;jinzhu&#34; AND age = 20 ORDER BY id LIMIT 1;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span><span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="s">&#34;jinzhu&#34;</span><span class="p">,</span> <span class="s">&#34;age&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">users</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// SELECT * FROM users WHERE name = &#34;jinzhu&#34; AND age = 20;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ä¸»é”®åˆ‡ç‰‡æ¡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Where</span><span class="p">([]</span><span class="kt">int64</span><span class="p">{</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">}).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">users</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// SELECT * FROM users WHERE id IN (20, 21, 22);
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¿”å›å¤šæ¡è®°å½•">è¿”å›å¤šæ¡è®°å½•
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">userList</span> <span class="p">[]</span><span class="nx">gorme</span><span class="p">.</span><span class="nx">User</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‡é’ˆæŸ¥è¯¢å­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">result</span> <span class="o">:=</span> <span class="nx">mysqlClient</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">,</span> <span class="s">&#34;nick_name&#34;</span><span class="p">).</span><span class="nf">Find</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userList</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">user</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">userList</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;id: %d nick_name: %s \n&#34;</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">ID</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">NickName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ›´æ–°">æ›´æ–°
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">db</span> <span class="o">*</span><span class="nx">DB</span><span class="p">)</span> <span class="nf">Update</span><span class="p">(</span><span class="nx">column</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">value</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">(</span><span class="nx">tx</span> <span class="o">*</span><span class="nx">DB</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ¡ä»¶æ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Model</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{}).</span><span class="nf">Where</span><span class="p">(</span><span class="s">&#34;active = ?&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">).</span><span class="nf">Update</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;hello&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// UPDATE users SET name=&#39;hello&#39;, updated_at=&#39;2013-11-17 21:34:10&#39; WHERE active=true;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// User çš„ ID æ˜¯ `111`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Model</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">).</span><span class="nf">Update</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;hello&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// UPDATE users SET name=&#39;hello&#39;, updated_at=&#39;2013-11-17 21:34:10&#39; WHERE id=111;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ ¹æ®æ¡ä»¶å’Œ model çš„å€¼è¿›è¡Œæ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">db</span><span class="p">.</span><span class="nf">Model</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">).</span><span class="nf">Where</span><span class="p">(</span><span class="s">&#34;active = ?&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">).</span><span class="nf">Update</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;hello&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// UPDATE users SET name=&#39;hello&#39;, updated_at=&#39;2013-11-17 21:34:10&#39; WHERE id=111 AND active=true;
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¸å­˜åœ¨åˆ™åˆ›å»º">ä¸å­˜åœ¨åˆ™åˆ›å»º
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">db</span><span class="p">.</span><span class="nf">FirstOrCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">,</span> <span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;John Doe&#34;</span><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="net-http">net/ http
</h3><p><a class="link" href="http://www.topgoer.com/%e5%b8%b8%e7%94%a8%e6%a0%87%e5%87%86%e5%ba%93/http.html"  target="_blank" rel="noopener"
    >Httpãƒ»Go è¯­è¨€ä¸­æ–‡æ–‡æ¡£ (topgoer.com)</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;handle hello&#34;</span><span class="p">)</span>	<span class="c1">// æœåŠ¡ç«¯æ‰“å°è¾“å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;hello GoLangWEB&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">login</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;handle login&#34;</span><span class="p">)</span>	<span class="c1">// æœåŠ¡ç«¯æ‰“å°è¾“å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;login...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">Hello</span><span class="p">)</span>		<span class="c1">// åŒ¹é…æ ¹è·¯ç”±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/login&#34;</span><span class="p">,</span> <span class="nx">login</span><span class="p">)</span>		<span class="c1">// åŒ¹é…æ ¹è·¯ç”±/login
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;0.0.0.0:8080&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;http listen failed&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å®¢æˆ·ç«¯æ–¹æ³•">å®¢æˆ·ç«¯æ–¹æ³•
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;http://5lmh.com/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ç¨‹åºåœ¨ä½¿ç”¨å®Œ response åå¿…é¡»å…³é—­å›å¤çš„ä¸»ä½“ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// handle error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">defer</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Post</span><span class="p">(</span><span class="s">&#34;http://5lmh.com/upload&#34;</span><span class="p">,</span> <span class="s">&#34;image/jpeg&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">buf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">PostForm</span><span class="p">(</span><span class="s">&#34;http://5lmh.com/form&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">{</span><span class="s">&#34;key&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#34;Value&#34;</span><span class="p">},</span> <span class="s">&#34;id&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#34;123&#34;</span><span class="p">}})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">body</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å®¢æˆ·ç«¯å‚æ•°--neturl">å®¢æˆ·ç«¯å‚æ•°  net/url
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ParseRequestURI</span><span class="p">(</span><span class="nx">requestURI</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">url</span><span class="p">.</span><span class="nx">URL</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// requestURI æ˜¯è¦è§£æçš„ URL è¯·æ±‚ URIï¼Œè€Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘ url.URL ç»“æ„ä½“çš„æŒ‡é’ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">URL</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">Scheme</span> <span class="kt">string</span> <span class="c1">// åè®®ï¼Œä¾‹å¦‚ &#34;http&#34;ã€&#34;https&#34; ç­‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Opaque</span> <span class="kt">string</span> <span class="c1">// ä¸é€æ˜éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨ä¸é€æ˜æ•°æ®ï¼Œä¾‹å¦‚ &#34;//example.com/path&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">User</span>     <span class="kt">string</span> <span class="c1">// ç”¨æˆ·åï¼Œä¾‹å¦‚ &#34;user&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Password</span> <span class="kt">string</span> <span class="c1">// å¯†ç ï¼Œä¾‹å¦‚ &#34;passwd&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Host</span>     <span class="kt">string</span> <span class="c1">// åŸŸåæˆ– IP åœ°å€ï¼Œä¾‹å¦‚ &#34;example.com&#34; æˆ– &#34;127.0.0.1&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">port</span>     <span class="kt">string</span> <span class="c1">// ç«¯å£å·ï¼Œä¾‹å¦‚ &#34;8080&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">path</span>     <span class="kt">string</span> <span class="c1">// è·¯å¾„ï¼Œä¾‹å¦‚ &#34;/path/to/file.html&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">query</span>    <span class="kt">string</span> <span class="c1">// æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ &#34;key1=value1&amp;key2=value2&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fragment</span> <span class="kt">string</span> <span class="c1">// ç‰‡æ®µæ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ &#34;#fragment&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// net/url å¤„ç†å¸¦å‚æ•°çš„è¯·æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">apiUrl</span> <span class="o">:=</span> <span class="s">&#34;http://127.0.0.1:9090/get&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// URL param
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">data</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;æ¯è—¤&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="s">&#34;18&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">url</span><span class="p">.</span><span class="nf">ParseRequestURI</span><span class="p">(</span><span class="nx">apiUrl</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;parse url requestUrl failed,err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">RawQuery</span> <span class="p">=</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Encode</span><span class="p">()</span> <span class="c1">// URL encode
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;post failed, err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;get resp failed,err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="postæ–¹æ³•">postæ–¹æ³•
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;io/ioutil&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;strings&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// net/http post demo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span> <span class="o">:=</span> <span class="s">&#34;http://127.0.0.1:9090/post&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¡¨å•æ•°æ®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//contentType := &#34;application/x-www-form-urlencoded&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//data := &#34;name=æ¯è—¤&amp;age=18&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// json
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">contentType</span> <span class="o">:=</span> <span class="s">&#34;application/json&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="o">:=</span> <span class="s">`{&#34;name&#34;:&#34;æ¯è—¤&#34;,&#34;age&#34;:18}`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">Post</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">contentType</span><span class="p">,</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;post failed, err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;get resp failed,err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æœåŠ¡å™¨ç«¯">æœåŠ¡å™¨ç«¯
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// http server
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">sayHello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintln</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;Hello æ¯è—¤ï¼&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">sayHello</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:9090&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;http server failed, err:%v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="gin">gin
</h3><p><a class="link" href="http://www.topgoer.com/gin%E6%A1%86%E6%9E%B6"  target="_blank" rel="noopener"
    >å®˜æ–¹æ–‡æ¡£</a></p>
<p>Gin çš„åŸºæœ¬æ¶æ„ï¼š</p>
<ul>
<li><strong>Router</strong>ï¼šå®ƒæ˜¯ Gin åº”ç”¨ç¨‹åºçš„<strong>æ ¸å¿ƒéƒ¨åˆ†</strong>ï¼Œå®ƒæ¥æ”¶ HTTP è¯·æ±‚å¹¶æ ¹æ®è¯·æ±‚çš„è·¯å¾„å’Œ HTTP æ–¹æ³•å°†å…¶è·¯ç”±åˆ°æ­£ç¡®çš„å¤„ç†ç¨‹åºã€‚</li>
<li><strong>Handlers</strong>ï¼šå®ƒæ˜¯ Gin åº”ç”¨ç¨‹åºä¸­çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå®ƒæ¥æ”¶ HTTP è¯·æ±‚å¹¶è¿”å› HTTP å“åº”ã€‚</li>
<li><strong>Middleware</strong>ï¼šå®ƒæ˜¯åœ¨ HTTP è¯·æ±‚å’Œå¤„ç†ç¨‹åºä¹‹é—´å‘ç”Ÿçš„ä»£ç ã€‚å®ƒå¯ä»¥ç”¨æ¥å®Œæˆä¸€äº›å¸¸è§çš„æ“ä½œï¼Œå¦‚èº«ä»½éªŒè¯ã€æ—¥å¿—è®°å½•ã€å¤„ç†è¯·æ±‚ç­‰ã€‚</li>
</ul>
<h4 id="gincontext">gin.context
</h4><ul>
<li>Context æ˜¯ginä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚ ä¾‹å¦‚ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸­é—´ä»¶ä¹‹é—´ä¼ é€’å˜é‡ã€ç®¡ç†æµç¨‹ã€éªŒè¯è¯·æ±‚çš„ JSON å¹¶å‘ˆç° JSON å“åº”ã€‚</li>
<li>Context ä¸­å°è£…äº†åŸç”Ÿçš„ Go http  <strong>è¯·æ±‚å’Œå“åº”</strong>å¯¹è±¡ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨äºè·å–è¯·æ±‚å’Œå“åº”çš„ä¿¡æ¯ã€è®¾ç½®å“åº”å¤´ã€è®¾ç½®å“åº”çŠ¶æ€ç ç­‰æ“ä½œã€‚</li>
<li>åœ¨ Gin ä¸­ï¼ŒContext æ˜¯é€šè¿‡ä¸­é—´ä»¶æ¥ä¼ é€’çš„ã€‚åœ¨å¤„ç† HTTPè¯·æ±‚ æ—¶ï¼ŒGin ä¼š<strong>ä¾æ¬¡æ‰§è¡Œæ³¨å†Œçš„ä¸­é—´ä»¶</strong>ï¼Œæ¯ä¸ªä¸­é—´ä»¶å¯ä»¥å¯¹ Context è¿›è¡Œä¸€äº›æ“ä½œï¼Œç„¶åå°† Context ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Context</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">writermem</span> <span class="nx">responseWriter</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Request</span>   <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Writer</span>    <span class="nx">ResponseWriter</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">Params</span>   <span class="nx">Params</span>
</span></span><span class="line"><span class="cl">	<span class="nx">handlers</span> <span class="nx">HandlersChain</span>
</span></span><span class="line"><span class="cl">	<span class="nx">index</span>    <span class="kt">int8</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fullPath</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">engine</span>       <span class="o">*</span><span class="nx">Engine</span>
</span></span><span class="line"><span class="cl">	<span class="nx">params</span>       <span class="o">*</span><span class="nx">Params</span>
</span></span><span class="line"><span class="cl">	<span class="nx">skippedNodes</span> <span class="o">*</span><span class="p">[]</span><span class="nx">skippedNode</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// è¯¥äº’æ–¥é”ä¿æŠ¤é”®æ˜ å°„ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">mu</span> <span class="nx">sync</span><span class="p">.</span><span class="nx">RWMutex</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// Keys æ˜¯ä¸“é—¨ç”¨äºæ¯ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡çš„é”®/å€¼å¯¹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Keys</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">any</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// é”™è¯¯æ˜¯é™„åŠ åˆ°ä½¿ç”¨æ­¤ä¸Šä¸‹æ–‡çš„æ‰€æœ‰å¤„ç†ç¨‹åº/ä¸­é—´ä»¶çš„é”™è¯¯åˆ—è¡¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Errors</span> <span class="nx">errorMsgs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å·²æ¥å—å®šä¹‰äº†ç”¨äºå†…å®¹åå•†çš„æ‰‹åŠ¨æ¥å—æ ¼å¼çš„åˆ—è¡¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Accepted</span> <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// queryCache ç¼“å­˜ c.Request.URL.Query() çš„æŸ¥è¯¢ç»“æœã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">queryCache</span> <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// formCache ç¼“å­˜ c.Request.PostFormï¼Œå…¶ä¸­åŒ…å«ä» POSTã€PATCH æˆ– PUT æ­£æ–‡å‚æ•°è§£æçš„è¡¨å•æ•°æ®ã€‚	
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">formCache</span> <span class="nx">url</span><span class="p">.</span><span class="nx">Values</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// SameSite å…è®¸æœåŠ¡å™¨å®šä¹‰ cookie å±æ€§ï¼Œä»è€Œä½¿æµè§ˆå™¨æ— æ³•éšè·¨ç«™ç‚¹è¯·æ±‚å‘é€æ­¤ cookieã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">sameSite</span> <span class="nx">http</span><span class="p">.</span><span class="nx">SameSite</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢æ˜¯ Context æä¾›çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ol>
<li>Context.Key ()ï¼šè·å–ä¸Šä¸‹æ–‡ä¸­çš„é”®å€¼ã€‚</li>
<li>Context.Get ()ï¼šè·å–ä¸Šä¸‹æ–‡ä¸­çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼ã€‚</li>
<li>Context.Set ()ï¼šè®¾ç½®ä¸Šä¸‹æ–‡ä¸­çš„å€¼ã€‚</li>
<li>Context.Map ()ï¼šè·å–ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ã€‚</li>
<li>Context.PostForm ()ï¼šè·å–è¯·æ±‚çš„è¡¨å•æ•°æ®ã€‚</li>
<li>Context.Query ()ï¼šè·å–è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ã€‚</li>
<li>Context.Param ()ï¼šè·å–è¯·æ±‚çš„è·¯å¾„å‚æ•°ã€‚</li>
<li>Context.Cookie ()ï¼šè·å–è¯·æ±‚çš„ cookieã€‚</li>
<li>Context.Redirect ()ï¼šé‡å®šå‘åˆ°æŒ‡å®šçš„ URLã€‚</li>
<li>Context.Render ()ï¼šæ¸²æŸ“æ¨¡æ¿å¹¶è¿”å›å“åº”ã€‚</li>
<li>Context.String ()ï¼š<strong>è¿”å›</strong>ä¸€ä¸ªå­—ç¬¦ä¸²å“åº”ã€‚</li>
<li>Context.HTML ()ï¼šè¿”å›ä¸€ä¸ª HTML å“åº”ã€‚</li>
<li>Context.JSON ()ï¼š<strong>è¿”å›</strong>ä¸€ä¸ª JSON å“åº”ã€‚</li>
<li>Context.XML ()ï¼šè¿”å›ä¸€ä¸ª XML å“åº”ã€‚</li>
</ol>
<h4 id="å¿«é€Ÿä½¿ç”¨">å¿«é€Ÿä½¿ç”¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// åˆ›å»ºä¸€ä¸ªGinè·¯ç”±å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å®šä¹‰è·¯ç”±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;Hello World!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/ping&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;pong!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">})</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">r</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/submit&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="kd">var</span> <span class="nx">json</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Name</span> <span class="kt">string</span> <span class="s">`json:&#34;name&#34;`</span>
</span></span><span class="line"><span class="cl">			<span class="nx">Email</span> <span class="kt">string</span> <span class="s">`json:&#34;email&#34;`</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">json</span><span class="p">);</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;JSON received&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="s">&#34;name&#34;</span><span class="p">:</span>    <span class="nx">json</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">				<span class="s">&#34;email&#34;</span><span class="p">:</span>   <span class="nx">json</span><span class="p">.</span><span class="nx">Email</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="p">})</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;error&#34;</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">()})</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å¯åŠ¨Ginåº”ç”¨ç¨‹åº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="json">json
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/someJSON&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">data</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;lang&#34;</span><span class="p">:</span> <span class="s">&#34;GOè¯­è¨€&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">			<span class="s">&#34;tag&#34;</span><span class="p">:</span>  <span class="s">&#34;&lt;br&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// è¾“å‡º : {&#34;lang&#34;:&#34;GO\u8bed\u8a00&#34;,&#34;tag&#34;:&#34;\u003cbr\u003e&#34;}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">c</span><span class="p">.</span><span class="nf">AsciiJSON</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// ç›‘å¬å¹¶åœ¨ 0.0.0.0:8080 ä¸Šå¯åŠ¨æœåŠ¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è·å–å‚æ•°">è·å–å‚æ•°
</h4><ul>
<li>å¯ä»¥é€šè¿‡ Context çš„ Param æ–¹æ³•æ¥è·å– API å‚æ•°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;strings&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/user/:name/*action&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">Param</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">action</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">Param</span><span class="p">(</span><span class="s">&#34;action&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//æˆªå–/
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">action</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Trim</span><span class="p">(</span><span class="nx">action</span><span class="p">,</span> <span class="s">&#34;/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusOK</span><span class="p">,</span> <span class="nx">name</span><span class="o">+</span><span class="s">&#34; is &#34;</span><span class="o">+</span><span class="nx">action</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//é»˜è®¤ä¸ºç›‘å¬8080ç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ <code>:name</code> å’Œ <code>*action</code> éƒ½æ˜¯<strong>åŠ¨æ€å‚æ•°</strong>ã€‚å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ <code>GET /user/å°æ˜/list</code> çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°†åŒ¹é…åˆ°è¯¥è·¯ç”±ï¼Œå¹¶å°† <code>å°æ˜</code> å’Œ <code>list</code> ä¸¤ä¸ªå‚æ•°çš„å€¼åˆ†åˆ«<strong>èµ‹å€¼</strong>ç»™ <code>:name</code> å’Œ <code>*action</code>ã€‚</p>
<p>åœ¨ Go è¯­è¨€çš„è·¯ç”±åŒ¹é…ä¸­ï¼Œ<code>:</code> å’Œ <code>*</code> ç¬¦å·å…·æœ‰<strong>ä¸åŒçš„å«ä¹‰</strong>ï¼š</p>
<ul>
<li><code>:</code> ç¬¦å·è¡¨ç¤ºä¸€ä¸ªåŠ¨æ€å‚æ•°ï¼Œå®ƒå¯ä»¥åŒ¹é…<strong>ä»»æ„é•¿åº¦</strong>çš„å­—ç¬¦ä¸²ï¼Œ<strong>åŒ…æ‹¬ç©ºå­—ç¬¦ä¸²</strong>ã€‚ä¾‹å¦‚ï¼Œ<code>r.GET(&quot;/user/:name&quot;)</code> è¡¨ç¤ºä¸€ä¸ªå¤„ç† <code>GET</code> è¯·æ±‚çš„è·¯ç”±ï¼Œå…¶ä¸­ <code>:name</code> æ˜¯ä¸€ä¸ªåŠ¨æ€å‚æ•°ï¼Œå®ƒå¯ä»¥åŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç©ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>*</code> ç¬¦å·è¡¨ç¤ºä¸€ä¸ª<strong>å¯é€‰</strong>çš„åŠ¨æ€å‚æ•°ï¼Œå®ƒå¯ä»¥åŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œ<strong>ä½†ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²</strong>ã€‚ä¾‹å¦‚ï¼Œ<code>r.GET(&quot;/user/:name/*action&quot;)</code> è¡¨ç¤ºä¸€ä¸ªå¤„ç† <code>GET</code> è¯·æ±‚çš„è·¯ç”±ï¼Œå…¶ä¸­ <code>:name</code> æ˜¯ä¸€ä¸ªåŠ¨æ€å‚æ•°ï¼Œè€Œ <code>*action</code> æ˜¯ä¸€ä¸ªå¯é€‰çš„åŠ¨æ€å‚æ•°ã€‚å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ <code>GET /user/å°æ˜/list</code> çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°†åŒ¹é…åˆ°è¯¥è·¯ç”±ï¼Œå¹¶å°† <code>å°æ˜</code> å’Œ <code>list</code> ä¸¤ä¸ªå‚æ•°çš„å€¼åˆ†åˆ«èµ‹å€¼ç»™ <code>:name</code> å’Œ <code>*action</code>ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘é€ <code>GET /user/å°æ˜</code> çš„è¯·æ±‚ï¼Œåˆ™æœåŠ¡å™¨å°†æ— æ³•åŒ¹é…è¯¥è·¯ç”±ï¼Œå› ä¸º <code>*action</code> å‚æ•°ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<h4 id="è·¯ç”±">è·¯ç”±
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ginçš„helloWorld
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// 1.åˆ›å»ºè·¯ç”±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// é»˜è®¤ä½¿ç”¨äº†2ä¸ªä¸­é—´ä»¶Logger(), Recovery()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// è·¯ç”±ç»„1 ï¼Œå¤„ç†GETè¯·æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">v1</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Group</span><span class="p">(</span><span class="s">&#34;/v1&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// {} æ˜¯ä¹¦å†™è§„èŒƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">v1</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/login&#34;</span><span class="p">,</span> <span class="nx">login</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">v1</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;submit&#34;</span><span class="p">,</span> <span class="nx">submit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">v2</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Group</span><span class="p">(</span><span class="s">&#34;/v2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">v2</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/login&#34;</span><span class="p">,</span> <span class="nx">login</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">v2</span><span class="p">.</span><span class="nf">POST</span><span class="p">(</span><span class="s">&#34;/submit&#34;</span><span class="p">,</span> <span class="nx">submit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8000&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">login</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">name</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">DefaultQuery</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;jack&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;hello %s\n&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">submit</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">name</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">DefaultQuery</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;lily&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">   <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;hello %s\n&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>GET <code>/user//res</code>æ˜¯åˆæ³•çš„ä¹ˆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">GET</span> <span class="o">/</span><span class="nx">user</span><span class="o">/</span> <span class="o">/</span><span class="nx">res</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸º <code>GET</code> è¯·æ±‚çš„è·¯å¾„ä¸­åŒ…å«äº†ä¸¤ä¸ªè¿ç»­çš„ <code>/</code> ç¬¦å·ï¼Œæ‰€ä»¥å®ƒå°†åŒ¹é…åˆ° <code>GET /user//res</code> è¿™ä¸ªè·¯ç”±ã€‚åœ¨è¿™ä¸ªè·¯ç”±ä¸­ï¼Œä¸¤ä¸ª <code>/</code> ç¬¦å·ä¹‹é—´çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªå¯é€‰çš„åŠ¨æ€å‚æ•°ï¼Œå®ƒå¯ä»¥æ˜¯ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ <code>GET /user//res</code> çš„è¯·æ±‚ï¼Œåˆ™æœåŠ¡å™¨å°†åŒ¹é…åˆ°è¯¥è·¯ç”±ï¼Œå¹¶å°† <code>res</code> å‚æ•°çš„å€¼èµ‹å€¼ç»™è¯¥åŠ¨æ€å‚æ•°ã€‚</p>
<h4 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸­é—´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">MiddleWare</span><span class="p">()</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸­é—´ä»¶å¼€å§‹æ‰§è¡Œäº†&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// è®¾ç½®å˜é‡åˆ°Contextçš„keyä¸­ï¼Œå¯ä»¥é€šè¿‡Get()å–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">c</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;request&#34;</span><span class="p">,</span> <span class="s">&#34;ä¸­é—´ä»¶&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// æ‰§è¡Œå‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">c</span><span class="p">.</span><span class="nf">Next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ä¸­é—´ä»¶æ‰§è¡Œå®Œåç»­çš„ä¸€äº›äº‹æƒ…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">status</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Writer</span><span class="p">.</span><span class="nf">Status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•&#34;</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t2</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Since</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;time:&#34;</span><span class="p">,</span> <span class="nx">t2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1.åˆ›å»ºè·¯ç”±
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// é»˜è®¤ä½¿ç”¨äº†2ä¸ªä¸­é—´ä»¶Logger(), Recovery()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">r</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ³¨å†Œä¸­é—´ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">r</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nf">MiddleWare</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// {}ä¸ºäº†ä»£ç è§„èŒƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">r</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/ce&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// å–å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">req</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;request&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;request:&#34;</span><span class="p">,</span> <span class="nx">req</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// é¡µé¢æ¥æ”¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="nx">gin</span><span class="p">.</span><span class="nx">H</span><span class="p">{</span><span class="s">&#34;request&#34;</span><span class="p">:</span> <span class="nx">req</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">r</span><span class="p">.</span><span class="nf">Run</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ—¥å¿—">æ—¥å¿—
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ç¦ç”¨æ§åˆ¶å°é¢œè‰²ï¼Œå°†æ—¥å¿—å†™å…¥æ–‡ä»¶æ—¶ä¸éœ€è¦æ§åˆ¶å°é¢œè‰²ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">gin</span><span class="p">.</span><span class="nf">DisableConsoleColor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è®°å½•åˆ°æ–‡ä»¶ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">f</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;gin.log&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">gin</span><span class="p">.</span><span class="nx">DefaultWriter</span> <span class="p">=</span> <span class="nx">io</span><span class="p">.</span><span class="nf">MultiWriter</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å¦‚æœéœ€è¦åŒæ—¶å°†æ—¥å¿—å†™å…¥æ–‡ä»¶å’Œæ§åˆ¶å°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// gin.DefaultWriter = io.MultiWriter(f, os.Stdout)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="nx">router</span> <span class="o">:=</span> <span class="nx">gin</span><span class="p">.</span><span class="nf">Default</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">router</span><span class="p">.</span><span class="nf">GET</span><span class="p">(</span><span class="s">&#34;/ping&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">gin</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">&#34;pong&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">router</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å›å¤">å›å¤
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// å›å¤ json å­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">JSON</span><span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">code</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">obj</span> <span class="kd">interface</span><span class="p">{})</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">c</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;Hello, World!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="gin-é¡¹ç›®ç›®å½•ç»“æ„">gin é¡¹ç›®ç›®å½•ç»“æ„
</h4><p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>configs</strong> ç›®å½•åŒ…å«é¡¹ç›®çš„é…ç½®æ–‡ä»¶</li>
<li><strong>controllers</strong> ç›®å½•åŒ…å«<strong>æ§åˆ¶å™¨</strong>æ–‡ä»¶</li>
<li><strong>middleware</strong> ç›®å½•åŒ…å«<strong>ä¸­é—´ä»¶</strong>æ–‡ä»¶</li>
<li><strong>models</strong> ç›®å½•åŒ…å«æ¨¡å‹ï¼ˆORMï¼‰æ–‡ä»¶</li>
<li><strong>routes</strong> ç›®å½•åŒ…å«<strong>è·¯ç”±</strong>æ–‡ä»¶</li>
<li><strong>services</strong> ç›®å½•åŒ…å«æœåŠ¡æ–‡ä»¶</li>
<li><strong>utils</strong> ç›®å½•åŒ…å«å¤šä¸ªå·¥å…·æ–‡ä»¶</li>
<li><strong>main.go</strong> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œ<code>README.md</code> æ˜¯é¡¹ç›®çš„ä»‹ç»æ–‡ä»¶ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">â”œâ”€â”€ configs
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ config.yaml
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ db.yaml
</span></span><span class="line"><span class="cl">â”œâ”€â”€ controllers
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ auth_controller.go
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ user_controller.go
</span></span><span class="line"><span class="cl">â”œâ”€â”€ middleware
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ auth_middleware.go
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ logger_middleware.go
</span></span><span class="line"><span class="cl">â”œâ”€â”€ models
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ db.go
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ user.go
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ ...
</span></span><span class="line"><span class="cl">â”œâ”€â”€ routes
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ routes.go
</span></span><span class="line"><span class="cl">â”œâ”€â”€ services
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ auth_service.go
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ user_service.go
</span></span><span class="line"><span class="cl">â”œâ”€â”€ utils
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ response.go
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ ...
</span></span><span class="line"><span class="cl">â”œâ”€â”€ main.go
</span></span><span class="line"><span class="cl">â””â”€â”€ README.md
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="yaml">YAML
</h3><p><a class="link" href="https://github.com/go-yaml/yaml"  target="_blank" rel="noopener"
    >go-yaml/yaml: YAML support for the Go language. (github.com)</a></p>
<p><a class="link" href="https://pkg.go.dev/gopkg.in/yaml.v3"  target="_blank" rel="noopener"
    >å®˜æ–¹æ–‡æ¡£</a></p>
<p>YAML å…¨ç§°æ˜¯ â€YAML Ainâ€™t a Markup Languageâ€ çš„<strong>é€’å½’</strong>ç¼©å†™ï¼Œè¯¥è¯­è¨€çš„è®¾è®¡å‚è€ƒäº† JSON / XML å’Œ SDL ç­‰è¯­è¨€ï¼Œå¼ºè°ƒä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œç®€æ´æ˜“è¯»ï¼Œç¼–å†™ç®€å•ã€‚</p>
<h4 id="è¯­æ³•ç‰¹ç‚¹">è¯­æ³•ç‰¹ç‚¹
</h4><ul>
<li><strong>å¤§å°å†™æ•æ„Ÿ</strong></li>
<li>é€šè¿‡<strong>ç¼©è¿›</strong>è¡¨ç¤ºå±‚çº§å…³ç³»</li>
<li>ç¦æ­¢ä½¿ç”¨ tab ç¼©è¿›ï¼Œåªèƒ½ä½¿ç”¨<strong>ç©ºæ ¼</strong>é”®</li>
<li>ç¼©è¿›çš„ç©ºæ ¼<strong>æ•°ç›®ä¸é‡è¦</strong>ï¼Œåªè¦ç›¸<strong>åŒå±‚çº§å·¦å¯¹é½</strong></li>
<li>ä½¿ç”¨ # è¡¨ç¤ºæ³¨é‡Š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ä»¥ä¸‹æ˜¯yaml</span>
</span></span><span class="line"><span class="cl">languages:
</span></span><span class="line"><span class="cl">    - Ruby
</span></span><span class="line"><span class="cl">    - Perl
</span></span><span class="line"><span class="cl">    - Python
</span></span><span class="line"><span class="cl">websites:
</span></span><span class="line"><span class="cl">    YAML: yaml.org
</span></span><span class="line"><span class="cl">    Ruby: ruby-lang.org
</span></span><span class="line"><span class="cl">    Python: python.org
</span></span><span class="line"><span class="cl">    Perl: use.perl.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä»¥ä¸‹æ˜¯Json</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    languages: <span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Ruby&#39;</span>,
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Perl&#39;</span>,
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Python&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span>,
</span></span><span class="line"><span class="cl">    websites: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        YAML: <span class="s1">&#39;yaml.org&#39;</span>,
</span></span><span class="line"><span class="cl">        Ruby: <span class="s1">&#39;ruby-lang.org&#39;</span>,
</span></span><span class="line"><span class="cl">        Python: <span class="s1">&#39;python.org&#39;</span>,
</span></span><span class="line"><span class="cl">        Perl: <span class="s1">&#39;use.perl.org&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å±æ€§">å±æ€§
</h4><ul>
<li><code>omitempty</code> æ˜¯ä¸€ä¸ªå±æ€§ï¼Œç”¨äºæŒ‡ç¤ºè¯¥å­—æ®µ<strong>æ˜¯å¦</strong>å¯ä»¥ä¸ºç©ºã€‚å¦‚æœè¿™äº›å­—æ®µæ²¡æœ‰å€¼ï¼Œå®ƒä»¬å°†ä¸ä¼šè¢«åºåˆ—åŒ–åˆ° YAML æ–‡ä»¶ä¸­</li>
</ul>
<h4 id="ä½¿ç”¨è¯´æ˜">ä½¿ç”¨è¯´æ˜
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Marshal</span><span class="p">(</span><span class="nx">in</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">(</span><span class="nx">out</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="s">&#34;gopkg.in/yaml.v3&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">data</span> <span class="p">=</span> <span class="s">`
</span></span></span><span class="line"><span class="cl"><span class="s">a: Easy!
</span></span></span><span class="line"><span class="cl"><span class="s">b:
</span></span></span><span class="line"><span class="cl"><span class="s">  c: 2
</span></span></span><span class="line"><span class="cl"><span class="s">  d: [3, 4]
</span></span></span><span class="line"><span class="cl"><span class="s">`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Note: struct fields must be public in order for unmarshal to
</span></span></span><span class="line"><span class="cl"><span class="c1">// correctly populate the data.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">T</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">A</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">        <span class="nx">B</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">RenamedC</span> <span class="kt">int</span>   <span class="s">`yaml:&#34;c&#34;`</span>
</span></span><span class="line"><span class="cl">                <span class="nx">D</span>        <span class="p">[]</span><span class="kt">int</span> <span class="s">`yaml:&#34;,flow&#34;`</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span> <span class="o">:=</span> <span class="nx">T</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="nx">err</span> <span class="o">:=</span> <span class="nx">yaml</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;error: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;--- t:\n%v\n\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="nx">d</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">yaml</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;error: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;--- t dump:\n%s\n\n&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kd">interface</span><span class="p">{}]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="nx">err</span> <span class="p">=</span> <span class="nx">yaml</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;error: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;--- m:\n%v\n\n&#34;</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="nx">d</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">yaml</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;error: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;--- m dump:\n%s\n\n&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w"> </span><span class="nt">t</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>{<span class="l">Easy! {2 [3 4]}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w"> </span><span class="nt">t dump</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l">Easy!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">b</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w"> </span><span class="nt">m</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">map[a:Easy! b:map[c:2 d:[3 4]]]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w"> </span><span class="nt">m dump</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l">Easy!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">b</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">d</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="m">4</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="jwt">jwt
</h3><h4 id="æ‘˜è¦">æ‘˜è¦
</h4><p><a class="link" href="https://github.com/golang-jwt/jwt"  target="_blank" rel="noopener"
    >golang-jwt/jwt: Community maintained clone of https://github.com/dgrijalva/jwt-go</a></p>
<p>Starting with v4.0.0 this project adds Go module support</p>
<p>åœ¨ä»‹ç» JWT ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹åˆ©ç”¨ <code>token</code> è¿›è¡Œç”¨æˆ·<strong>èº«ä»½éªŒè¯</strong>çš„<strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½•</li>
<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·åå’Œå¯†ç </li>
<li>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª <code>token</code>ï¼Œå†æŠŠè¿™ä¸ª <code>token</code> <strong>è¿”å›</strong>ç»™å®¢æˆ·ç«¯</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ° token åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åˆ° cookie ä¸­</li>
<li>å®¢æˆ·ç«¯<strong>æ¯æ¬¡</strong>å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºæ—¶éœ€è¦æºå¸¦æœåŠ¡ç«¯ç­¾å‘çš„ tokenï¼Œå¯ä»¥åœ¨ <code>cookie</code> æˆ–è€… <code>header</code> ä¸­æºå¸¦</li>
<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ <code>token</code>ï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚æ•°æ®</li>
</ol>
<p>è¿™ç§åŸºäº <code>token</code> çš„è®¤è¯æ–¹å¼ç›¸æ¯”ä¼ ç»Ÿçš„ <code>session</code> è®¤è¯æ–¹å¼æ›´èŠ‚çº¦æœåŠ¡å™¨èµ„æºï¼Œå¹¶ä¸”å¯¹ç§»åŠ¨ç«¯å’Œåˆ†å¸ƒå¼æ›´åŠ å‹å¥½ã€‚å…¶ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<p><a class="link" href="https://tool.box3.cn/jwt.html"  target="_blank" rel="noopener"
    >JWT åœ¨çº¿è§£ç  - å¼€å‘å·¥å…·ç®± (box3.cn)</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJsaXF3ZXR0IiwiZXhwIjoxNjkzMjk1MDY3LCJpYXQiOjE2OTMyMDg2NjgsImlzcyI6ImRlbW8iLCJuYmYiOjE2OTMyMDg2Njh9.GWPbzwiNBsCuAeE_dbn21xjAlGpK7Xh683F4-X1NPJc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;alg&#34;</span>: <span class="s2">&#34;HS256&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;typ&#34;</span>: <span class="s2">&#34;JWT&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;aud&#34;</span>: <span class="s2">&#34;liqwett&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;exp&#34;</span>: 1693295067,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;iat&#34;</span>: 1693208668,
</span></span><span class="line"><span class="cl">  <span class="c1"># å‘è¡Œäºº</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;iss&#34;</span>: <span class="s2">&#34;demo&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;nbf&#34;</span>: <span class="m">1693208668</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç»“æ„">ç»“æ„
</h4><p>JWT ç”± 3 éƒ¨åˆ†ç»„æˆï¼šæ ‡å¤´ (Header)ã€æœ‰æ•ˆè½½è· (Payload) å’Œç­¾å (Signature)</p>
<p>Header</p>
<p><strong>JWT å¤´</strong>æ˜¯ä¸€ä¸ªæè¿° JWT å…ƒæ•°æ®çš„ JSON å¯¹è±¡ï¼Œalg å±æ€§è¡¨ç¤ºç­¾åä½¿ç”¨çš„ç®—æ³•ï¼Œé»˜è®¤ä¸º HMAC SHA256ï¼ˆå†™ä¸º HS256ï¼‰ï¼›typ å±æ€§è¡¨ç¤ºä»¤ç‰Œçš„ç±»å‹ï¼ŒJWT ä»¤ç‰Œç»Ÿä¸€å†™ä¸º JWTã€‚æœ€åï¼Œä½¿ç”¨ Base64 URL ç®—æ³•å°†ä¸Šè¿° JSON å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¿å­˜</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;alg&#34;</span><span class="p">:</span> <span class="s">&#34;HS256&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;typ&#34;</span><span class="p">:</span> <span class="s">&#34;JWT&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Playload &mdash;æœ‰æ•ˆè·è½½éƒ¨åˆ†</p>
<p><strong>é»˜è®¤æƒ…å†µä¸‹ JWT æ˜¯æœªåŠ å¯†çš„ï¼Œå› ä¸ºåªæ˜¯é‡‡ç”¨ base64 ç®—æ³•ï¼Œæ‹¿åˆ° JWT å­—ç¬¦ä¸²åå¯ä»¥è½¬æ¢å›åŸæœ¬çš„ JSON æ•°æ®ï¼Œä»»ä½•äººéƒ½å¯ä»¥è§£è¯»å…¶å†…å®¹ï¼Œå› æ­¤ä¸è¦æ„å»ºéšç§ä¿¡æ¯å­—æ®µï¼Œæ¯”å¦‚ç”¨æˆ·çš„å¯†ç ä¸€å®šä¸èƒ½ä¿å­˜åˆ° JWT ä¸­</strong>ï¼Œä»¥é˜²æ­¢ä¿¡æ¯æ³„éœ²ã€‚ <strong>JWT åªæ˜¯é€‚åˆåœ¨ç½‘ç»œä¸­ä¼ è¾“ä¸€äº›éæ•æ„Ÿçš„ä¿¡æ¯</strong></p>
<p>jwt æŒ‡å®šä¸ƒä¸ªé»˜è®¤å­—æ®µå…±é€‰æ‹©</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">iss</span><span class="err">ï¼š</span><span class="nx">å‘è¡Œäºº</span>
</span></span><span class="line"><span class="cl"><span class="nx">exp</span><span class="err">ï¼š</span><span class="nx">åˆ°æœŸæ—¶é—´</span>
</span></span><span class="line"><span class="cl"><span class="nx">sub</span><span class="err">ï¼š</span><span class="nx">ä¸»é¢˜</span>
</span></span><span class="line"><span class="cl"><span class="nx">aud</span><span class="err">ï¼š</span><span class="nx">ç”¨æˆ·</span>
</span></span><span class="line"><span class="cl"><span class="nx">nbf</span><span class="err">ï¼š</span><span class="nx">åœ¨æ­¤ä¹‹å‰ä¸å¯ç”¨</span>
</span></span><span class="line"><span class="cl"><span class="nx">iat</span><span class="err">ï¼š</span><span class="nx">å‘å¸ƒæ—¶é—´</span>
</span></span><span class="line"><span class="cl"><span class="nx">jti</span><span class="err">ï¼š</span><span class="nx">JWT</span> <span class="nx">IDç”¨äºæ ‡è¯†è¯¥JWT</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥å®šä¹‰ç§æœ‰å­—æ®µ, ä¸€èˆ¬å§åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®æ”¾åˆ°<code>playload</code>ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;sub&#34;</span><span class="p">:</span> <span class="s">&#34;1234567890&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="s">&#34;Helen&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;admin&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>signature</p>
<ul>
<li>éœ€è¦æŒ‡å®šä¸€ä¸ªå¯†é’¥ï¼ˆsecretï¼‰ã€‚è¯¥å¯†ç ä»…ä»…ä¸ºä¿å­˜åœ¨<strong>æœåŠ¡å™¨</strong>ä¸­ï¼Œå¹¶ä¸”<strong>ä¸èƒ½å‘ç”¨æˆ·å…¬å¼€</strong>ã€‚</li>
<li>ä½¿ç”¨ header ä¸­æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸º HMAC SHA256ï¼‰æ ¹æ®ä»¥ä¸‹å…¬å¼ç”Ÿæˆç­¾å</li>
</ul>
<p>$\text{HMACSHA256}(\text{base}64\text{UrlEncode}(\text{header})+\text{â€œ.â€}+\text{base}64\text{UrlEncode}(\text{payload}),\text{secret})$</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"></code></pre></td></tr></table>
</div>
</div><p>åœ¨è®¡ç®—å‡ºç­¾åå“ˆå¸Œåï¼ŒJWT å¤´ï¼Œæœ‰æ•ˆè½½è·å’Œç­¾åå“ˆå¸Œçš„ä¸‰ä¸ªéƒ¨åˆ†ç»„åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨<code>.</code> åˆ†éš”ï¼Œå°±æ„æˆæ•´ä¸ª JWT å¯¹è±¡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nf">base64enc</span><span class="p">({</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;alg&#34;</span><span class="p">:</span> <span class="s">&#34;HS256&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;typ&#34;</span><span class="p">:</span> <span class="s">&#34;JWT&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="nf">base64enc</span><span class="p">({</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;iss&#34;</span><span class="p">:</span> <span class="s">&#34;toptal.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;exp&#34;</span><span class="p">:</span> <span class="mi">1426420800</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl"><span class="s">&#34;company&#34;</span><span class="p">:</span> <span class="s">&#34;Toptal&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl"><span class="s">&#34;awesome&#34;</span><span class="p">:</span><span class="kc">true</span>
</span></span><span class="line"><span class="cl"> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span>
</span></span><span class="line"><span class="cl"><span class="nf">HMACSHA256</span><span class="p">(</span>
</span></span><span class="line"><span class="cl"><span class="nf">base64enc</span><span class="p">(</span><span class="nx">header</span><span class="p">)</span><span class="o">+</span> <span class="sc">&#39;.&#39;</span><span class="o">+</span> <span class="nf">base64enc</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">,</span> <span class="nx">secretKey</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç­¾åç®—æ³•">ç­¾åç®—æ³•
</h4><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œjwt çš„ç­¾åç®—æ³•æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>HMACã€å“ˆå¸Œæ¶ˆæ¯éªŒè¯ç  (å¯¹ç§°)ã€‘ï¼šHS256/HS384/HS512</li>
<li>RSASSAã€RSA ç­¾åç®—æ³• (éå¯¹ç§°)ã€‘ï¼ˆRS256/RS384/RS512ï¼‰</li>
<li>ECDSAã€æ¤­åœ†æ›²çº¿æ•°æ®ç­¾åç®—æ³• (éå¯¹ç§°)ã€‘ï¼ˆES256/ES384/ES512ï¼‰</li>
</ul>
<h4 id="jwt-äº§ç”Ÿçš„-token-è¿˜éœ€è¦åŠ å¯†ä¹ˆ">jwt äº§ç”Ÿçš„ token è¿˜éœ€è¦åŠ å¯†ä¹ˆ
</h4><p>ç­¾åçš„ç›®çš„æ˜¯ä¸ºäº†éªŒè¯ JWT çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚å½“æœåŠ¡å™¨æ¥æ”¶åˆ° JWT æ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ç›¸åŒçš„å¯†é’¥å¯¹ JWT è¿›è¡Œè§£å¯†å’ŒéªŒè¯ç­¾åã€‚å¦‚æœç­¾åéªŒè¯æˆåŠŸï¼ŒæœåŠ¡å™¨å¯ä»¥ç›¸ä¿¡ JWT ä¸­çš„æ•°æ®æ˜¯å¯ä¿¡çš„ã€‚</p>
<p>å› æ­¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJWT çš„ç­¾åå·²ç»æä¾›äº†è¶³å¤Ÿçš„å®‰å…¨æ€§ï¼Œä¸éœ€è¦é¢å¤–çš„åŠ å¯†ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å¯¹æ•°æ®çš„ä¿å¯†æ€§æœ‰æ›´é«˜çš„è¦æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨åŠ å¯†ç®—æ³•å¯¹è½½è·éƒ¨åˆ†è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå°†åŠ å¯†åçš„æ•°æ®æ”¾å…¥ JWT çš„è½½è·ä¸­ã€‚</p>
<p>åœ¨ä¼ è¾“ JWT æ—¶å¯èƒ½ä¼šè¢«å…¶ä»–äººçªƒå–ï¼Œè¿™ç¡®å®å­˜åœ¨ä¸€å®šçš„é£é™©ã€‚JWT æœ¬èº«æ˜¯åŸºäºæ–‡æœ¬çš„ï¼Œå› æ­¤åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«<strong>æˆªè·æˆ–çªƒå–</strong>ã€‚</p>
<p>ä¸ºäº†å‡è½»è¿™ç§é£é™©ï¼Œæœ‰å‡ ä¸ªå¸¸è§çš„åšæ³•å¯ä»¥é‡‡ç”¨ï¼š</p>
<ol>
<li>ä½¿ç”¨ HTTPSï¼šä½¿ç”¨ HTTPS åè®®è¿›è¡Œé€šä¿¡å¯ä»¥åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼Œä»è€Œæä¾›æ›´é«˜çš„å®‰å…¨æ€§ã€‚è¿™æ ·ï¼Œå³ä½¿ JWT è¢«æˆªè·ï¼Œæ”»å‡»è€…ä¹Ÿæ— æ³•è½»æ˜“è§£å¯†å’Œç¯¡æ”¹å…¶ä¸­çš„æ•°æ®ã€‚</li>
<li>é™åˆ¶ JWT çš„æœ‰æ•ˆæœŸï¼šåœ¨ç”Ÿæˆ JWT æ—¶ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„æœ‰æ•ˆæœŸï¼Œä½¿å¾— JWT åœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨å¤±æ•ˆã€‚è¿™æ ·å³ä½¿ JWT è¢«æˆªè·ï¼Œæ”»å‡»è€…ä¹Ÿåªèƒ½åœ¨æœ‰æ•ˆæœŸå†…ä½¿ç”¨ï¼Œæœ‰æ•ˆæœŸè¿‡åå°±æ— æ³•ç»§ç»­ä½¿ç”¨ã€‚</li>
<li>é¿å…åœ¨ JWT ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼šå°½é‡é¿å…å°†æ•æ„Ÿä¿¡æ¯ç›´æ¥å­˜å‚¨åœ¨ JWT çš„è½½è·ä¸­ï¼Œç‰¹åˆ«æ˜¯ä¸è¦å°†å¯†ç ç­‰æ•æ„Ÿå‡­æ®æ”¾åœ¨ JWT ä¸­ã€‚å¦‚æœéœ€è¦ä¼ é€’æ•æ„Ÿä¿¡æ¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ å¯†ç®—æ³•å¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå°†åŠ å¯†åçš„æ•°æ®æ”¾å…¥ JWT çš„è½½è·ä¸­ã€‚</li>
<li>ä½¿ç”¨ç­¾åéªŒè¯ï¼šåœ¨æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ° JWT åï¼Œå§‹ç»ˆè¦è¿›è¡Œç­¾åéªŒè¯ï¼Œç¡®ä¿ JWT çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚å¦‚æœç­¾åéªŒè¯å¤±è´¥ï¼Œè¯´æ˜ JWT å¯èƒ½å·²è¢«ç¯¡æ”¹ï¼Œåº”è¯¥æ‹’ç»æ¥å—è¯¥ JWTã€‚</li>
</ol>
<h4 id="ä½¿ç”¨è¯´æ˜-1">ä½¿ç”¨è¯´æ˜
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;github.com/golang-jwt/jwt/v4&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºç§˜é’¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   	<span class="nx">key</span> <span class="o">:=</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;aaa&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆ›å»ºTokenç»“æ„ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">claims</span> <span class="o">:=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nf">NewWithClaims</span><span class="p">(</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">SigningMethodHS256</span><span class="p">,</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">MapClaims</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;user&#34;</span><span class="p">:</span> <span class="s">&#34;zhangshan&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;pass&#34;</span><span class="p">:</span> <span class="s">&#34;123123&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è°ƒç”¨åŠ å¯†æ–¹æ³•ï¼Œå‘æŒ¥Tokenå­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">signingString</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">claims</span><span class="p">.</span><span class="nf">SignedString</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">signingString</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// æ ¹æ®Tokenå­—ç¬¦ä¸²è§£ææˆClaimsç»“æ„ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nf">ParseWithClaims</span><span class="p">(</span><span class="nx">signingString</span><span class="p">,</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">MapClaims</span><span class="p">{},</span> <span class="kd">func</span><span class="p">(</span><span class="nx">token</span> <span class="o">*</span><span class="nx">jwt</span><span class="p">.</span><span class="nx">Token</span><span class="p">)</span> <span class="p">(</span><span class="kd">interface</span><span class="p">{},</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">token</span><span class="p">.</span><span class="nx">Header</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;aaa&#34;</span><span class="p">),</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//è¿™è¾¹æ˜¯è¾“å‡ºç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&amp;</span><span class="p">{</span> <span class="mh">0xc0000c2690</span> <span class="kd">map</span><span class="p">[</span><span class="nx">alg</span><span class="p">:</span><span class="nx">ES256</span> <span class="nx">typ</span><span class="p">:</span><span class="nx">JWT</span><span class="p">]</span> <span class="kd">map</span><span class="p">[</span><span class="nx">user</span><span class="p">:</span><span class="nx">zhangshan</span><span class="p">]</span>  <span class="kc">false</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è¿™æ˜¯åŠ å¯†åçš„å­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="p">.</span><span class="nx">eyJwYXNzIjoiMTIzMTIzIiwidXNlciI6InpoYW5nc2hhbiJ9</span><span class="p">.</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="nx">xIJXMGKV</span><span class="o">-</span><span class="nx">GyhM24OKbDVqWs4dsIANBsGhzXEfEFM</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="structmapper-githubcomhttpsgithubcomwizardshanstructmapper"><a class="link" href="https://github.com/wizardshan/structmapper"  target="_blank" rel="noopener"
    >structmapper (github.com)</a>
</h3><p>ç»“æ„æ˜ å°„å™¨</p>
<p>å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œéœ€è¦å„ä¸ªå±‚çš„æ•°æ®æµè½¬ï¼Œentity è½¬æ¢åˆ° domainï¼Œdomain è½¬æ¢åˆ° responseï¼Œå¸¸è§å®ç°çš„æ–¹å¼åŸºæœ¬éƒ½æ˜¯é€šè¿‡åå°„æœºåˆ¶å®ç°ï¼Œä¾‹å¦‚ Spring BeanUtils. copyPropertiesï¼ŒGolang çš„ copier ç¬¬ä¸‰æ–¹åº“ï¼Œåå°„çš„æ•ˆç‡ä¼—æ‰€å‘¨çŸ¥ï¼ŒåŸºæœ¬éƒ½æ˜¯æƒ¨ä¸å¿ç¹ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¸€ä¸ªä¸ªçš„èµ‹å€¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-golang" data-lang="golang"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nx">ID</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">   <span class="nx">Mobile</span>       <span class="kt">string</span>
</span></span><span class="line"><span class="cl">   <span class="nx">Level</span>       <span class="kt">int</span>
</span></span><span class="line"><span class="cl">   <span class="nx">Name</span>           <span class="kt">string</span>
</span></span><span class="line"><span class="cl">   <span class="nx">RegisterTime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="nf">Mapping</span> <span class="p">(</span><span class="nx">from</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">ID</span> <span class="p">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">ID</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">Mobile</span> <span class="p">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">Mobile</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">Level</span> <span class="p">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">Level</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">RegisterTime</span> <span class="p">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">RegisterTime</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//go:generate go run github.com/wizardshan/structmapper -toName User -fromName User -toPath ./response  -fromPath ./domain -toVar resp -fromVar dom
</span></span></span><span class="line"><span class="cl"><span class="c1">//go:generate go run github.com/wizardshan/structmapper -toName Orders -fromName Orders -toPath ./response  -fromPath ./domain -toVar resp -fromVar dom
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Users</span> <span class="p">[]</span><span class="o">*</span><span class="nx">User</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ID</span> <span class="kt">int</span> <span class="s">`json:&#34;id&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CreateTime</span> <span class="nx">DateTime</span> <span class="s">`json:&#34;createTime&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UpdateTime</span> <span class="o">*</span><span class="nx">DateTime</span> <span class="s">`json:&#34;updateTime&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">DeleteTime</span> <span class="o">*</span><span class="nx">DateTime</span> <span class="s">`json:&#34;deleteTime&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Mobile</span> <span class="kt">string</span> <span class="s">`json:&#34;mobile&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Nickname</span> <span class="kt">string</span> <span class="s">`json:&#34;nickname&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Money</span> <span class="nx">Money</span> <span class="s">`json:&#34;money&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Level</span> <span class="kt">int</span> <span class="s">`json:&#34;level&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">domain</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Users</span> <span class="p">[]</span><span class="o">*</span><span class="nx">User</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ID</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CreateTime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">	<span class="nx">UpdateTime</span> <span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Mobile</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Nickname</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Money</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">dom</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="nf">Level</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">user_mapping</span><span class="p">.</span><span class="k">go</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">resp</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="nf">Mapping</span><span class="p">(</span><span class="nx">dom</span> <span class="o">*</span><span class="nx">domain</span><span class="p">.</span><span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**************** mapping start ****************/</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">.</span><span class="nx">ID</span> <span class="p">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">ID</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">.</span><span class="nx">CreateTime</span> <span class="p">=</span> <span class="nf">DateTime</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">CreateTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">UpdateTime</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">updateTime</span> <span class="o">:=</span> <span class="nf">DateTime</span><span class="p">(</span><span class="o">*</span><span class="nx">dom</span><span class="p">.</span><span class="nx">UpdateTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">resp</span><span class="p">.</span><span class="nx">UpdateTime</span> <span class="p">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="nx">updateTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//resp.DeleteTime = fromStruct property not exist
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">resp</span><span class="p">.</span><span class="nx">Mobile</span> <span class="p">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">Mobile</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">.</span><span class="nx">Nickname</span> <span class="p">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">Nickname</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">.</span><span class="nx">Money</span> <span class="p">=</span> <span class="nf">Money</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">Money</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">resp</span><span class="p">.</span><span class="nx">Level</span> <span class="p">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nf">Level</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/**************** mapping end  ****************/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">orders_mapping</span><span class="p">.</span><span class="k">go</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">resp</span> <span class="o">*</span><span class="nx">Orders</span><span class="p">)</span> <span class="nf">Mapping</span><span class="p">(</span><span class="nx">dom</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">Orders</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="cm">/**************** mapping start ****************/</span>
</span></span><span class="line"><span class="cl">	<span class="nx">domOrdersLen</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">dom</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">resp</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">Orders</span><span class="p">,</span> <span class="nx">domOrdersLen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">domOrdersLen</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="nx">domOrdersIndex</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">domOrdersIndex</span> <span class="p">&lt;</span> <span class="nx">domOrdersLen</span><span class="p">;</span> <span class="nx">domOrdersIndex</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">domOrdersItem</span> <span class="o">:=</span> <span class="nx">dom</span><span class="p">[</span><span class="nx">domOrdersIndex</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Order</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">ID</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">ID</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Status</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Status</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Consignee</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Consignee</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Mobile</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Mobile</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Province</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Province</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">City</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">City</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Expired</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nf">Expired</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Shop</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">respOrderShop</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Shop</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="nx">respOrderShop</span><span class="p">.</span><span class="nx">ID</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Shop</span><span class="p">.</span><span class="nx">ID</span>
</span></span><span class="line"><span class="cl">				<span class="nx">respOrderShop</span><span class="p">.</span><span class="nx">Name</span> <span class="p">=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Shop</span><span class="p">.</span><span class="nx">Name</span>
</span></span><span class="line"><span class="cl">				<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Shop</span> <span class="p">=</span> <span class="nx">respOrderShop</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="nx">domOrdersItemItemsLen</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="nx">respOrderItems</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="o">*</span><span class="nx">Item</span><span class="p">,</span> <span class="nx">domOrdersItemItemsLen</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">domOrdersItemItemsLen</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="k">for</span> <span class="nx">domOrdersItemItemsIndex</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">domOrdersItemItemsIndex</span> <span class="p">&lt;</span> <span class="nx">domOrdersItemItemsLen</span><span class="p">;</span> <span class="nx">domOrdersItemItemsIndex</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="nx">domOrdersItemItemsItem</span> <span class="o">:=</span> <span class="nx">domOrdersItem</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">domOrdersItemItemsIndex</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">					<span class="nx">respOrderItem</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">respOrderItem</span><span class="p">.</span><span class="nx">ID</span> <span class="p">=</span> <span class="nx">domOrdersItemItemsItem</span><span class="p">.</span><span class="nx">ID</span>
</span></span><span class="line"><span class="cl">					<span class="nx">respOrderItem</span><span class="p">.</span><span class="nx">Title</span> <span class="p">=</span> <span class="nx">domOrdersItemItemsItem</span><span class="p">.</span><span class="nx">Title</span>
</span></span><span class="line"><span class="cl">					<span class="nx">respOrderItem</span><span class="p">.</span><span class="nx">Price</span> <span class="p">=</span> <span class="nf">Money</span><span class="p">(</span><span class="nx">domOrdersItemItemsItem</span><span class="p">.</span><span class="nx">Price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">					<span class="nx">respOrderItems</span><span class="p">[</span><span class="nx">domOrdersItemItemsIndex</span><span class="p">]</span> <span class="p">=</span> <span class="nx">respOrderItem</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			<span class="nx">respOrder</span><span class="p">.</span><span class="nx">Items</span> <span class="p">=</span> <span class="nf">respOrderItems</span>
</span></span><span class="line"><span class="cl">			<span class="p">(</span><span class="o">*</span><span class="nx">resp</span><span class="p">)[</span><span class="nx">domOrdersIndex</span><span class="p">]</span> <span class="p">=</span> <span class="nx">respOrder</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="cm">/**************** mapping end  ****************/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="hertz">hertz
</h3><p>thriftgoæ˜¯ä»€ä¹ˆ</p>
<p><code>thriftgo</code> æ˜¯ Thrift åè®®çš„ Go è¯­è¨€å®ç°ã€‚Thrift æ˜¯ä¸€ç§è·¨è¯­è¨€çš„æœåŠ¡æ¡†æ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¹‹é—´è¿›è¡Œé€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚</p>
<p><code>thriftgo</code> æ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äºç”Ÿæˆ Thrift æœåŠ¡å’Œå®¢æˆ·ç«¯ä»£ç çš„ Go è¯­è¨€åº“ã€‚ä½¿ç”¨ <code>thriftgo</code>ï¼Œå¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°å®šä¹‰ Thrift æœåŠ¡å¥‘çº¦ï¼Œç”ŸæˆæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä»£ç ï¼Œå¹¶åœ¨ä¸åŒçš„è¯­è¨€ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p>
<p><code>thriftgo</code> çš„ä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ”¯æŒå¤šç§è¯­è¨€ï¼š<code>thriftgo</code> å¯ä»¥ç”Ÿæˆå¤šç§è¯­è¨€çš„ä»£ç ï¼ŒåŒ…æ‹¬ Goã€Javaã€C++ã€Python ç­‰ã€‚</li>
<li>ç®€å•æ˜“ç”¨ï¼š<code>thriftgo</code> æä¾›äº†ä¸€ä¸ªç®€å•çš„ APIï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿç”Ÿæˆ Thrift æœåŠ¡å’Œå®¢æˆ·ç«¯ä»£ç ã€‚</li>
<li>é«˜æ•ˆï¼š<code>thriftgo</code> ä½¿ç”¨äº† Thrift åè®®çš„äºŒè¿›åˆ¶ç¼–ç æ–¹å¼ï¼Œå¯ä»¥æé«˜é€šä¿¡çš„æ•ˆç‡ã€‚</li>
<li>å¯æ‰©å±•ï¼š<code>thriftgo</code> æ”¯æŒå¤šç§æ‹“å±•åŠŸèƒ½ï¼Œå¦‚å¯å®šåˆ¶çš„ç”Ÿæˆä»£ç ã€å¤šç§åºåˆ—åŒ–æ–¹å¼ç­‰ã€‚</li>
</ol>
<p>æ€»ä¹‹ï¼Œ<code>thriftgo</code> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿå®ç°è·¨è¯­è¨€çš„é€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚</p>
<p>protocæ˜¯ä»€ä¹ˆ</p>
<p><code>protoc</code> æ˜¯ Protocol Buffers åè®®çš„ç¼–è¯‘å™¨ï¼Œå®ƒç”¨äºå°†å®šä¹‰çš„ Protocol Buffers åè®®æ–‡ä»¶ï¼ˆ.proto æ–‡ä»¶ï¼‰è½¬æ¢æˆå¯¹åº”çš„ç¼–ç¨‹è¯­è¨€ä»£ç ï¼Œå¦‚ Javaã€C++ã€Python ç­‰ã€‚Protocol Buffers æ˜¯ä¸€ç§ç”¨äºæ•°æ®äº¤æ¢çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒå¯ä»¥åœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ã€‚</p>
<p><code>protoc</code> æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­è°ƒç”¨ã€‚ä½¿ç”¨ <code>protoc</code> å¯ä»¥æå¤§åœ°ç®€åŒ– Protocol Buffers åè®®çš„ä½¿ç”¨ï¼Œå‡å°‘ä»£ç çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>ä½¿ç”¨ <code>protoc</code> ç¼–è¯‘ Protocol Buffers åè®®æ–‡ä»¶çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/byte_tech/">Byte_tech</a>
        
            <a href="/tags/go/">Go</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/go_%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E9%9B%B6%E6%8B%B7%E8%B4%9D%E5%8F%8A%E5%BA%94%E7%94%A8/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go_æ·±å…¥æµ…å‡ºé›¶æ‹·è´åŠåº”ç”¨</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go_quick_book/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go_quick_book</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%BC%8F%E6%B4%9E/">
        
        

        <div class="article-details">
            <h2 class="article-title">æ¼æ´</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go_/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go_</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go_/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go_</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2024 Example Person
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.27.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
